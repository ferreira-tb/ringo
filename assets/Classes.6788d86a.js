import{d as E,u as k,o as i,c as u,b as c,e as d,j as B,F as v,q as S,a as p,t as M,B as $,I as N,p as I,g as A,_ as D,h as C,E as j,H as L,J as R,m as q,K as z,w as _,T as H,x as g,r as K,f as G}from"./index.c770b2c0.js";import{R as w}from"./error.596be0a1.js";import{d as J}from"./game.caf39fbe.js";import{B as m}from"./Button.e9826086.js";const P=n=>(I("data-v-78b6bc6d"),n=n(),A(),n),U={class:"class-bonuses"},O=P(()=>c("h2",null,"Detalhes",-1)),Q={class:"class-name-wrapper"},W={key:0,class:"bold green span-wrapper"},X=E({__name:"ClassBonuses",props:{classInfoMap:null},setup(n){const{character:r}=k();return(x,t)=>(i(),u("section",U,[O,c("div",Q,[d(N,null,{default:B(()=>[(i(!0),u(v,null,S(p(r).class,o=>(i(),u(v,{key:o[0]},[n.classInfoMap.has(o[0])?(i(),u("span",W,M(o[1].name),1)):$("",!0)],64))),128))]),_:1})])]))}});const Y=D(X,[["__scopeId","data-v-78b6bc6d"]]),h=n=>(I("data-v-55f0e1f5"),n=n(),A(),n),Z=h(()=>c("p",{class:"text-line"},"Classes descrevem a voca\xE7\xE3o de um personagem e suas aptid\xF5es especiais. Hora de escolher a sua.",-1)),ee=h(()=>c("p",{class:"text-line small"},[g("Se ficar em d\xFAvida, apenas clique em "),c("span",{class:"bold"},"continuar"),g(".")],-1)),se=h(()=>c("p",{class:"text-line small"},"A Ringo escolher\xE1 uma classe aleat\xF3ria para voc\xEA.",-1)),ae={class:"class-select-area"},te=["disabled","value"],oe={class:"button-area"},ne=E({__name:"Classes",setup(n){const{character:r}=k(),{classes:x}=J(),t=C([]);r.books.forEach(a=>{const e=x.get(a);if(e)for(const[s,l]of e.entries())t.push([s,l,a])});const o=j(null),b=C(new Map),F=L(()=>t.length<1||typeof o.value!="number");t.length>0&&(Promise.all(r.books.map(async a=>{try{const e=await fetch(`/ringo/api/classes/book${a.toString(10)}.json`);if(e.status===404)return;const s=await e.json();if(Array.isArray(s))s.forEach(l=>b.set(l.codigo,l));else throw new w("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as classes.")}catch(e){e instanceof Error&&console.error(e)}})),t.sort((a,e)=>a[1].localeCompare(e[1],"pt-br")));function y(a,e,s,l=1){if(typeof a!="number"||typeof e!="string"||typeof s!="number"){if(o.value===null)return;a=o.value;const f=t.find(T=>T[0]===a);if(!f)throw new w("N\xE3o foi poss\xEDvel encontrar a classe na lista.");e=f[1],s=f[2]}r.class.set(a,{book:s,level:l,name:e})}function V(){if(r.class.size===0){const a=Math.floor(Math.random()*t.length),e=typeof o.value=="number"?o.value:a;y(...t[e])}}return R(()=>{const a=(s,l)=>l===s[0],e=new Set;for(const s of r.class.keys())t.some(l=>a(l,s))||e.add(s);e.forEach(s=>r.class.delete(s))}),(a,e)=>(i(),u("section",null,[Z,ee,se,c("div",ae,[q(c("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s)},[(i(!0),u(v,null,S(t,s=>(i(),u("option",{key:s[0],disabled:p(r).class.has(s[0]),value:s[0]},M(s[1]),9,te))),128))],512),[[z,o.value,void 0,{number:!0}]])]),c("div",oe,[d(m,{disabled:t.length<1,text:"Continuar",onClick:_(V,["prevent"])},null,8,["disabled","onClick"]),d(m,{disabled:p(F),text:"Adicionar classe",onClick:e[1]||(e[1]=_(s=>y(),["prevent"]))},null,8,["disabled"]),d(m,{text:"Voltar",onClick:e[2]||(e[2]=_(s=>p(K).push({name:"create-char-step-2"}),["prevent"]))})]),d(H,{name:"fade",mode:"out-in"},{default:B(()=>[p(r).class.size>0?(i(),G(Y,{key:0,"class-info-map":b},null,8,["class-info-map"])):$("",!0)]),_:1})]))}});const ue=D(ne,[["__scopeId","data-v-55f0e1f5"]]);export{ue as default};
