var W=Object.defineProperty;var J=(a,e,s)=>e in a?W(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var c=(a,e,s)=>(J(a,typeof e!="symbol"?e+"":e,s),s);import{i as K,j as O,k as g,d as A,s as U,o as h,c as y,b as m,l as T,F as z,m as M,u as i,a as o,t as x,T as P,p as E,h as F,_ as L,r as Y,q as V,g as B,v as H,x as Z,y as k,z as w,A as S,B as C,n as I,C as R}from"./index.c6ecb24b.js";import{g as X,R as j}from"./helpers.7de38784.js";import{B as _}from"./Button.6504c797.js";const q=K("dice",()=>{const a=[],e=O([2,4,6,8,10,12,20,100]),s=g(null),p=g(1),l=g(0),r=g("normal");return{diceHistory:a,diceTypes:e,chosenDice:s,diceAmount:p,modifier:l,rollType:r}});class ee{constructor(e,s){c(this,"type");c(this,"value");c(this,"other");this.type=s,this.value=this.randomNumber(e),this.other=s==="normal"?null:this.randomNumber(e)}randomNumber(e){return Math.floor(Math.random()*e+1)}}class te{constructor(e,s,p,l){c(this,"date",Date.now());c(this,"dice");c(this,"amount");c(this,"modToSum");c(this,"finalResult");c(this,"text");c(this,"type");c(this,"rolls",[]);this.dice=e,this.amount=s,this.modToSum=p,this.text=X(e,s,p),this.type=l;let r=0;for(;r<s;){r++;const u=new ee(e,l);this.rolls.push(u)}if(this.rolls.length===0)throw new j("Nenhum dado foi rolado.");this.finalResult=this.rolls.reduce((u,t)=>u+(()=>{switch(l){case"normal":return t.value;case"vantagem":return t.value>=t.other?t.value:t.other;case"desvantagem":return t.value<=t.other?t.value:t.other}})(),this.modToSum)}}const se=a=>(E("data-v-7cc32e0b"),a=a(),F(),a),oe={class:"history-area"},ae=se(()=>o("h2",null,"Hist\xF3rico",-1)),le=["onClick"],ne={class:"small"},ie=A({__name:"DiceHistory",setup(a){const e=q(),{diceHistory:s}=e,{chosenDice:p,diceAmount:l,modifier:r,rollType:u}=U(e);function t(v){p.value=v.dice,l.value=v.amount,r.value=v.modToSum,u.value=v.type}function b(v){return`${new Date(v).toLocaleTimeString("pt-br")}`}return(v,D)=>(h(),y("section",oe,[ae,m(P,{name:"list"},{default:T(()=>[(h(!0),y(z,null,M(i(s),f=>(h(),y("div",{key:f.date,onClick:$=>t(f)},[o("span",null,x(`${f.text} = ${f.finalResult}`),1),o("span",ne,x(b(f.date)),1)],8,le))),128))]),_:1})]))}});const re=L(ie,[["__scopeId","data-v-7cc32e0b"]]),G=a=>(E("data-v-1a3ecb50"),a=a(),F(),a),ue={class:"dice-roller"},de={class:"result-area"},ce={class:"result-text"},ve={class:"mod-area"},me={class:"mod-row"},_e=G(()=>o("span",{class:"bold"},"Quantidade",-1)),pe={class:"bold green-text"},he={class:"mod-row"},fe=G(()=>o("span",{class:"bold"},"Modificador",-1)),ye={class:"radio-area"},be=["disabled"],xe=["disabled"],ge=["disabled"],De={class:"dice-area"},ke=A({__name:"DiceRoller",setup(a){const e=q(),{diceHistory:s,diceTypes:p}=e,{chosenDice:l,diceAmount:r,modifier:u,rollType:t}=U(e),b=Y({width:"80%",height:"3em",fontSize:"1em",fontWeight:550}),v=V(()=>l.value===null?null:X(l.value,r.value,u.value)),D=V(()=>({bold:!0,"green-text":u.value>=0,"red-text":u.value<0}));function f(){if(l.value===null)throw new j("Nenhum dado foi escolhido.");const N=new te(l.value,r.value,u.value,t.value);for(;s.length>10;)s.pop();s.unshift(N)}function $(){r.value>1&&r.value--}return(N,n)=>(h(),y("main",ue,[o("div",de,[o("div",ce,[m(H,{name:"fade",mode:"out-in"},{default:T(()=>[i(v)?(h(),y("span",{key:i(v)},x(i(v)),1)):B("",!0)]),_:1})]),m(_,{class:"roll-button",text:"Rolar",disabled:i(l)===null,onClick:f},null,8,["disabled"])]),o("div",ve,[o("div",me,[m(_,{text:"X",onClick:n[0]||(n[0]=d=>r.value=1)}),_e,m(_,{text:"-",onClick:$}),o("span",pe,x(i(r)),1),m(_,{text:"+",onClick:n[1]||(n[1]=d=>r.value++)})]),o("div",he,[m(_,{text:"X",onClick:n[2]||(n[2]=d=>u.value=0)}),fe,m(_,{text:"-",onClick:n[3]||(n[3]=d=>u.value--)}),o("span",{class:Z(i(D))},x(i(u)),3),m(_,{text:"+",onClick:n[4]||(n[4]=d=>u.value++)})]),o("div",ye,[o("label",null,[k(o("input",{type:"radio",value:"normal","onUpdate:modelValue":n[5]||(n[5]=d=>S(t)?t.value=d:null),disabled:i(l)!==20},null,8,be),[[w,i(t)]]),C(" Normal ")]),o("label",null,[k(o("input",{type:"radio",value:"vantagem","onUpdate:modelValue":n[6]||(n[6]=d=>S(t)?t.value=d:null),disabled:i(l)!==20},null,8,xe),[[w,i(t)]]),C(" Vantagem ")]),o("label",null,[k(o("input",{type:"radio",value:"desvantagem","onUpdate:modelValue":n[7]||(n[7]=d=>S(t)?t.value=d:null),disabled:i(l)!==20},null,8,ge),[[w,i(t)]]),C(" Desvantagem ")])])]),o("div",De,[(h(!0),y(z,null,M(i(p),(d,Q)=>(h(),R(_,{style:I(b),text:`D${d}`,key:Q,onClick:we=>l.value=d},null,8,["style","text","onClick"]))),128)),m(_,{text:"Salvos",style:I(b)},null,8,["style"])]),m(H,{name:"fade",mode:"out-in"},{default:T(()=>[i(s).length>0?(h(),R(re,{key:0})):B("",!0)]),_:1})]))}});const Ne=L(ke,[["__scopeId","data-v-1a3ecb50"]]);export{Ne as default};
