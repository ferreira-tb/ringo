import{d as q,l as E,o as f,c as v,a as t,D as x,t as y,u,p as z,h as O,_ as R,f as K,M as G,r as L,k as F,N as H,v as U,O as J,F as I,j as P,b as w,w as N,i as B,T as Q,z as V,A as j,g as T,P as X,e as Y}from"./index.bd8e0be9.js";import{R as b,j as A,f as Z}from"./helpers.42634f98.js";import{d as ee,e as se,f as ae}from"./game.d726f562.js";import{B as M}from"./Button.d66cba2a.js";const g=p=>(z("data-v-b911aaa3"),p=p(),O(),p),te={class:"class-bonuses"},oe={class:"first-title div-title"},ne=g(()=>t("span",{class:"bold green-text"},"Dado de vida:",-1)),re={class:"div-title"},ie=g(()=>t("span",{class:"bold green-text"},"Armaduras:",-1)),ce={class:"div-title"},le=g(()=>t("span",{class:"bold green-text"},"Armas:",-1)),de={class:"div-title"},ue=g(()=>t("span",{class:"bold green-text"},"Testes de resist\xEAncia:",-1)),pe={class:"div-title"},fe=g(()=>t("span",{class:"bold green-text"},"Per\xEDcias:",-1)),_e=q({__name:"ClassBonuses",props:{abilityInfo:null,classInfo:null},setup(p){const n=p,{weapons:k}=ee(),{charSkill:l}=se(),$=E(()=>`${`${n.classInfo.hp.quantidade}d${n.classInfo.hp.dado}`} por n\xEDvel de ${n.classInfo.nome.toLowerCase()}`),S=E(()=>{const o=n.classInfo.proficiencias.armaduras.map(c=>{switch(c){case 0:return"armaduras leves";case 1:return"armaduras m\xE9dias";case 2:return"armaduras pesadas";case 3:return"escudos";default:throw new b("O tipo da armadura \xE9 inv\xE1lido.")}});return o.length===0?"Nenhuma":A(o)}),i=E(()=>{var m,a;const o=(m=n.classInfo.proficiencias.armas.tipo)==null?void 0:m.map(s=>{switch(s){case 0:return"armas simples";case 1:return"armas marciais";default:throw new b("O tipo da arma \xE9 inv\xE1lido.")}}),c=(a=n.classInfo.proficiencias.armas.avulso)==null?void 0:a.map(s=>{const e=k.get(s);if(!e)throw new b("N\xE3o foi poss\xEDvel determinar o nome da arma.");return e.toLowerCase()}),r=[];return Array.isArray(o)&&r.push(...o),Array.isArray(c)&&r.push(...c),r.length===0?"Nenhuma":A(r)}),_=E(()=>{const o=n.classInfo.proficiencias.resistencia.map(c=>{var m;const r=(m=n.abilityInfo.get(c))==null?void 0:m.nome;if(!r)throw new b("N\xE3o foi poss\xEDvel determinar o nome da habilidade.");return r});return A(o)}),h=E(()=>{var r;const o=`escolha ${n.classInfo.proficiencias.pericias.quantidade.toLocaleString("pt-br")}`,c=(r=n.classInfo.proficiencias.pericias.lista)==null?void 0:r.map(m=>{const a=l.get(m);if(!a)throw new b("N\xE3o foi poss\xEDvel determinar o nome da per\xEDcia.");return a});return`${o} ${c?`dentre ${A(c)}`:"quaisquer"}`});return(o,c)=>(f(),v("section",te,[t("div",oe,[ne,x(y(u($)),1)]),t("div",re,[ie,x(y(u(S)),1)]),t("div",ce,[le,x(y(u(i)),1)]),t("div",de,[ue,x(y(u(_)),1)]),t("div",pe,[fe,x(y(u(h)),1)])]))}});const me=R(_e,[["__scopeId","data-v-b911aaa3"]]),C=p=>(z("data-v-3337345c"),p=p(),O(),p),he=C(()=>t("p",{class:"text-line"},"Classes descrevem a voca\xE7\xE3o de um personagem e suas aptid\xF5es especiais. Hora de escolher a sua.",-1)),ve=C(()=>t("p",{class:"text-line small"},[x("Se ficar em d\xFAvida, apenas clique em "),t("span",{class:"bold"},"continuar"),x(".")],-1)),xe=C(()=>t("p",{class:"text-line small"},"A Ringo escolher\xE1 uma classe aleat\xF3ria para voc\xEA.",-1)),ye={class:"class-select-area"},be=["disabled","value"],we={class:"button-area"},Ee={key:0,class:"class-info-area"},ge=C(()=>t("h2",null,"Detalhes",-1)),ke={class:"class-name-wrapper"},Ae=["onClick"],Ce=q({__name:"Classes",async setup(p){let n,k;const{character:l}=K(),{classes:$}=ae(),S=([n,k]=G(()=>Z()),n=await n,k(),n),i=L([]);l.books.forEach(a=>{const s=$.get(a);if(s)for(const[e,d]of s.entries())i.push([e,d,a])});const _=F(null),h=F(null),o=L(new Map),c=E(()=>i.length<1||typeof _.value!="number");i.length>0&&(Promise.all(l.books.map(async a=>{try{const s=await fetch(`/ringo/api/classes/book${a.toString(10)}.json`);if(s.status===404)return;const e=await s.json();if(Array.isArray(e))e.forEach(d=>o.set(d.codigo,d));else throw new b("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as classes.")}catch(s){s instanceof Error&&console.error(s)}})),i.sort((a,s)=>a[1].localeCompare(s[1],"pt-br")));function r(a,s,e,d=1){if(typeof a!="number"||typeof s!="string"||typeof e!="number"){if(_.value===null)return;a=_.value;const D=i.find(W=>W[0]===a);if(!D)throw new b("N\xE3o foi poss\xEDvel encontrar a classe na lista.");s=D[1],e=D[2]}l.class.set(a,{book:e,level:d,name:s}),h.value=a}function m(){if(l.class.size===0){const a=Math.floor(Math.random()*i.length),s=typeof _.value=="number"?_.value:a;r(...i[s])}}return H(()=>{const a=(e,d)=>d===e[0],s=new Set;for(const e of l.class.keys())i.some(d=>a(d,e))||s.add(e);s.forEach(e=>l.class.delete(e))}),(a,s)=>(f(),v("section",null,[he,ve,xe,t("div",ye,[U(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e)},[(f(!0),v(I,null,P(i,e=>(f(),v("option",{key:e[0],disabled:u(l).class.has(e[0]),value:e[0]},y(e[1]),9,be))),128))],512),[[J,_.value,void 0,{number:!0}]])]),t("div",we,[w(M,{disabled:i.length<1,text:"Continuar",onClick:N(m,["prevent"])},null,8,["disabled","onClick"]),w(M,{disabled:u(c),text:"Adicionar classe",onClick:s[1]||(s[1]=N(e=>r(),["prevent"]))},null,8,["disabled"]),w(M,{text:"Voltar",onClick:s[2]||(s[2]=N(e=>u(Y).push({name:"create-char-step-2"}),["prevent"]))})]),w(V,{name:"fade",mode:"out-in"},{default:B(()=>[u(l).class.size>0?(f(),v("div",Ee,[ge,t("div",ke,[w(Q,{name:"list"},{default:B(()=>[(f(!0),v(I,null,P(u(l).class,e=>(f(),v(I,{key:e[0]},[o.has(e[0])?(f(),v("span",{key:0,class:"bold green span-wrapper",onClick:d=>h.value=e[0]},y(e[1].name),9,Ae)):T("",!0)],64))),128))]),_:1})]),w(V,{name:"fade",mode:"out-in"},{default:B(()=>[(f(),j(X,null,[typeof h.value=="number"&&o.has(h.value)?(f(),j(me,{key:h.value,"ability-info":u(S),"class-info":o.get(h.value)},null,8,["ability-info","class-info"])):T("",!0)],1024))]),_:1})])):T("",!0)]),_:1})]))}});const Ne=R(Ce,[["__scopeId","data-v-3337345c"]]);export{Ne as default};
