var P=Object.defineProperty;var U=(a,e,s)=>e in a?P(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var S=(a,e,s)=>(U(a,typeof e!="symbol"?e+"":e,s),s);import{d as A,o as n,c as l,b as t,t as d,m as h,_ as R,x as H,y as O,z as g,a as r,F as C,l as E,A as w,e as y,i as N,B as J,p as j,g as q,f as z,u as K,C as F,D as Q,k as W,E as X,w as M,T as Y,r as Z}from"./index.58d89bef.js";import{a as ee,b as te,u as se}from"./game.38df282e.js";import{S as T}from"./StandardButton.71fe4724.js";const ae={class:"race-ability"},oe={class:"bold green-text"},ne=A({__name:"RaceAbility",props:{bonus:null},setup(a){const e=a;return(s,v)=>(n(),l("div",ae,[t("span",oe,d(`${e.bonus.nome}. `),1),h(" "+d(e.bonus.efeito),1)]))}});const ce=R(ne,[["__scopeId","data-v-6f791729"]]),re={class:"tooltip-wrapper"},ie=A({__name:"Tooltip",props:{text:null},setup(a){const e=a;return(s,v)=>(n(),l("div",re,[t("div",{class:H(["tooltip-box",{"hide-tooltip":!e.text}])},d(e.text),3)]))}});const le=R(ie,[["__scopeId","data-v-7b4952ea"]]),b=a=>(j("data-v-ecd0b94e"),a=a(),q(),a),ue={class:"race-bonuses"},de=b(()=>t("h2",null,"Detalhes da Ra\xE7a",-1)),pe={key:0,class:"plus-wrapper"},_e=["onClick"],he={class:"plus"},fe={key:1,class:"minus-wrapper"},me=["onClick"],ge={class:"minus"},be={class:"first-title"},ve=b(()=>t("span",{class:"bold span-title green-text"},"Expectativa de vida:",-1)),xe=b(()=>t("span",{class:"bold span-title green-text"},"Peso m\xE9dio:",-1)),ye=b(()=>t("span",{class:"bold span-title green-text"},"Altura:",-1)),Ie=b(()=>t("span",{class:"bold span-title green-text"},"Deslocamento:",-1)),$e=b(()=>t("span",{class:"bold span-title green-text"},"Idiomas:",-1)),ke={key:0},Se=b(()=>t("h2",null,"Habilidades Inatas",-1)),Ce=A({__name:"RaceBonuses",props:{raceInfo:null},setup(a){const e=a,s=ee(),{ability:v}=s;class B{constructor(_,c,m){S(this,"name");S(this,"value");S(this,"description");this.name=_,this.value=c,this.description=m}}const u=O(null),x=g(()=>I("pos")),$=g(()=>I("neg"));function I(f){const _=[];for(const[c,m]of Object.entries(e.raceInfo.habilidades)){const D=new B(v[c].name,m,v[c].description);(f==="pos"&&Math.sign(m)===1||f==="neg"&&Math.sign(m)===-1)&&_.push(D)}return _}const L=g(()=>`${e.raceInfo.idade.toLocaleString("pt-br")} anos`),i=g(()=>`${e.raceInfo.peso.toLocaleString("pt-br")} quilos`),o=g(()=>{const f=e.raceInfo.altura.min,_=e.raceInfo.altura.max;return`Entre ${f.toLocaleString("pt-br")} e ${_.toLocaleString("pt-br")} ${_<2?"metro":"metros"}`}),p=g(()=>`${e.raceInfo.deslocamento.toLocaleString("pt-br")} metros`),k=te(),G=g(()=>e.raceInfo.idiomas.map(_=>k.languages.get(_)).join(", "));return(f,_)=>(n(),l("section",ue,[de,t("div",null,[r(x).length>0?(n(),l("div",pe,[(n(!0),l(C,null,E(r(x),c=>(n(),l("span",{class:"bold span-wrapper",onClick:m=>u.value=c.description},[h(d(c.name)+" ",1),t("span",he,d(` +${c.value.toString(10)}`),1)],8,_e))),256))])):w("",!0),r($).length>0?(n(),l("div",fe,[(n(!0),l(C,null,E(r($),c=>(n(),l("span",{class:"bold span-wrapper",onClick:m=>u.value=c.description},[h(d(c.name)+" ",1),t("span",ge,d(` -${c.value.toString(10)}`),1)],8,me))),256))])):w("",!0)]),y(le,{text:u.value},null,8,["text"]),t("div",be,[ve,h(d(r(L)),1)]),t("div",null,[xe,h(d(r(i)),1)]),t("div",null,[ye,h(d(r(o)),1)]),t("div",null,[Ie,h(d(r(p)),1)]),t("div",null,[$e,h(d(r(G)),1)]),e.raceInfo.bonus.length>0?(n(),l("div",ke,[Se,y(J,{name:"fade"},{default:N(()=>[(n(!0),l(C,null,E(e.raceInfo.bonus,c=>(n(),z(ce,{key:c.key,bonus:c},null,8,["bonus"]))),128))]),_:1})])):w("",!0)]))}});const Ee=R(Ce,[["__scopeId","data-v-ecd0b94e"]]),V=a=>(j("data-v-47fea984"),a=a(),q(),a),we=V(()=>t("p",{class:"text-line"},"Escolha uma ra\xE7a para seu personagem. Ela definir\xE1 sua apar\xEAncia geral e seus talentos naturais.",-1)),Ae=V(()=>t("p",{class:"text-line small"},[h("Se ficar em d\xFAvida, apenas clique em "),t("span",{class:"bold"},"continuar"),h(".")],-1)),Re=V(()=>t("p",{class:"text-line small"},"Uma ra\xE7a aleat\xF3ria ser\xE1 escolhida para voc\xEA!",-1)),Be={class:"races-area"},Le=["value"],Me={class:"button-area"},Te=A({__name:"Races",setup(a){const e=K(),{character:s}=e,v=se(),{races:B}=v,u=F([]);s.books.forEach(i=>{const o=B.get(i);o&&u.push(...o.entries())}),u.length>0&&(Promise.all(s.books.map(i=>$(i))),u.sort((i,o)=>i[1].localeCompare(o[1],"pt-br")));const x=F(new Map);async function $(i){try{const o=await fetch(`/ringo/api/races/book${i.toString(10)}.json`);if(o.status===404)return;const p=await o.json();Array.isArray(p)&&p.forEach(k=>x.set(k.codigo,k))}catch(o){o instanceof Error&&console.error(o)}}function I(){const i=Math.floor(Math.random()*u.length);s.race=u[i][0]}function L(){s.race===null&&I()}return Q(()=>{u.some(i=>s.race===i[0])||(s.race=null)}),(i,o)=>(n(),l("section",null,[we,Ae,Re,t("div",Be,[W(t("select",{"onUpdate:modelValue":o[0]||(o[0]=p=>r(s).race=p)},[(n(!0),l(C,null,E(u,p=>(n(),l("option",{key:p[0],value:p[0]},d(p[1]),9,Le))),128))],512),[[X,r(s).race,void 0,{number:!0}]])]),t("div",Me,[y(T,{text:"Continuar",disabled:u.length<1,onClick:M(L,["prevent"])},null,8,["disabled","onClick"]),y(T,{text:"Aleat\xF3rio",disabled:u.length<1,onClick:M(I,["prevent"])},null,8,["disabled","onClick"]),y(T,{text:"Voltar",onClick:o[1]||(o[1]=M(p=>r(Z).push({name:"create-char-step-1"}),["prevent"]))})]),y(Y,{name:"fade",mode:"out-in"},{default:N(()=>[typeof r(s).race=="number"&&x.has(r(s).race)?(n(),z(Ee,{key:0,raceInfo:x.get(r(s).race)},null,8,["raceInfo"])):w("",!0)]),_:1})]))}});const je=R(Te,[["__scopeId","data-v-47fea984"]]);export{je as default};
