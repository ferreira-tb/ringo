import{d as K,D as w,o as p,c as h,b as t,x,t as y,a as l,p as P,g as R,_ as W,u as G,E as H,h as M,C as L,G as O,m as U,H as J,F as S,q as V,e as b,w as D,j as B,T as j,r as Q,I as X,B as N,f as q,K as Y}from"./index.4b641bec.js";import{R as g,j as T,f as Z}from"./helpers.3620516d.js";import{d as ee,u as se,e as ae}from"./game.75261692.js";import{B as F}from"./Button.2077ddb1.js";const E=d=>(P("data-v-34873046"),d=d(),R(),d),te={class:"class-bonuses"},oe={class:"first-title div-title"},ne=E(()=>t("span",{class:"bold green-text"},"Dado de vida:",-1)),re={class:"div-title"},ie=E(()=>t("span",{class:"bold green-text"},"Armaduras:",-1)),ce={class:"div-title"},le=E(()=>t("span",{class:"bold green-text"},"Armas:",-1)),de={class:"div-title"},ue=E(()=>t("span",{class:"bold green-text"},"Testes de resist\xEAncia:",-1)),pe={class:"div-title"},fe=E(()=>t("span",{class:"bold green-text"},"Fonte:",-1)),_e=K({__name:"ClassBonuses",props:{abilityInfo:null,classInfo:null},setup(d){const o=d,{weapons:C}=ee(),{books:i}=se(),A=w(()=>i.get(o.classInfo.livro)),$=w(()=>`${`${o.classInfo.hp.quantidade}d${o.classInfo.hp.dado}`} por n\xEDvel de ${o.classInfo.nome.toLowerCase()}`),r=w(()=>{const n=o.classInfo.proficiencias.armaduras.map(_=>{switch(_){case 0:return"armaduras leves";case 1:return"armaduras m\xE9dias";case 2:return"armaduras pesadas";case 3:return"escudos";default:throw new g("O tipo da armadura \xE9 inv\xE1lido.")}});return n.length===0?"Nenhuma":T(n)}),f=w(()=>{var v,a;const n=(v=o.classInfo.proficiencias.armas.tipo)==null?void 0:v.map(s=>{switch(s){case 0:return"armas simples";case 1:return"armas marciais";default:throw new g("O tipo da arma \xE9 inv\xE1lido.")}}),_=(a=o.classInfo.proficiencias.armas.avulso)==null?void 0:a.map(s=>{const e=C.get(s);if(!e)throw new g("N\xE3o foi poss\xEDvel determinar o nome da arma.");return e.toLowerCase()}),u=[];return Array.isArray(n)&&u.push(...n),Array.isArray(_)&&u.push(..._),u.length===0?"Nenhuma":T(u)}),m=w(()=>{const n=o.classInfo.proficiencias.resistencia.map(_=>{var v;const u=(v=o.abilityInfo.get(_))==null?void 0:v.nome;if(!u)throw new g("N\xE3o foi poss\xEDvel determinar o nome da habilidade.");return u});return T(n)});return(n,_)=>(p(),h("section",te,[t("div",oe,[ne,x(y(l($)),1)]),t("div",re,[ie,x(y(l(r)),1)]),t("div",ce,[le,x(y(l(f)),1)]),t("div",de,[ue,x(y(l(m)),1)]),t("div",pe,[fe,x(y(l(A)),1)])]))}});const me=W(_e,[["__scopeId","data-v-34873046"]]),k=d=>(P("data-v-27edf9da"),d=d(),R(),d),he=k(()=>t("p",{class:"text-line"},"Classes descrevem a voca\xE7\xE3o de um personagem e suas aptid\xF5es especiais. Hora de escolher a sua.",-1)),ve=k(()=>t("p",{class:"text-line small"},[x("Se ficar em d\xFAvida, apenas clique em "),t("span",{class:"bold"},"continuar"),x(".")],-1)),xe=k(()=>t("p",{class:"text-line small"},"A Ringo escolher\xE1 uma classe aleat\xF3ria para voc\xEA.",-1)),ye={class:"class-select-area"},be=["disabled","value"],we={class:"button-area"},ge={key:0,class:"class-info-area"},Ee=k(()=>t("h2",null,"Detalhes",-1)),Ce={class:"class-name-wrapper"},ke=["onClick"],Ae=K({__name:"Classes",async setup(d){let o,C;const{character:i}=G(),{classes:A}=ae(),$=([o,C]=H(()=>Z()),o=await o,C(),o),r=M([]);i.books.forEach(a=>{const s=A.get(a);if(s)for(const[e,c]of s.entries())r.push([e,c,a])});const f=L(null),m=L(null),n=M(new Map),_=w(()=>r.length<1||typeof f.value!="number");r.length>0&&(Promise.all(i.books.map(async a=>{try{const s=await fetch(`/ringo/api/classes/book${a.toString(10)}.json`);if(s.status===404)return;const e=await s.json();if(Array.isArray(e))e.forEach(c=>n.set(c.codigo,c));else throw new g("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as classes.")}catch(s){s instanceof Error&&console.error(s)}})),r.sort((a,s)=>a[1].localeCompare(s[1],"pt-br")));function u(a,s,e,c=1){if(typeof a!="number"||typeof s!="string"||typeof e!="number"){if(f.value===null)return;a=f.value;const I=r.find(z=>z[0]===a);if(!I)throw new g("N\xE3o foi poss\xEDvel encontrar a classe na lista.");s=I[1],e=I[2]}i.class.set(a,{book:e,level:c,name:s}),m.value=a}function v(){if(i.class.size===0){const a=Math.floor(Math.random()*r.length),s=typeof f.value=="number"?f.value:a;u(...r[s])}}return O(()=>{const a=(e,c)=>c===e[0],s=new Set;for(const e of i.class.keys())r.some(c=>a(c,e))||s.add(e);s.forEach(e=>i.class.delete(e))}),(a,s)=>(p(),h("section",null,[he,ve,xe,t("div",ye,[U(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e)},[(p(!0),h(S,null,V(r,e=>(p(),h("option",{key:e[0],disabled:l(i).class.has(e[0]),value:e[0]},y(e[1]),9,be))),128))],512),[[J,f.value,void 0,{number:!0}]])]),t("div",we,[b(F,{disabled:r.length<1,text:"Continuar",onClick:D(v,["prevent"])},null,8,["disabled","onClick"]),b(F,{disabled:l(_),text:"Adicionar classe",onClick:s[1]||(s[1]=D(e=>u(),["prevent"]))},null,8,["disabled"]),b(F,{text:"Voltar",onClick:s[2]||(s[2]=D(e=>l(Q).push({name:"create-char-step-2"}),["prevent"]))})]),b(j,{name:"fade",mode:"out-in"},{default:B(()=>[l(i).class.size>0?(p(),h("div",ge,[Ee,t("div",Ce,[b(X,null,{default:B(()=>[(p(!0),h(S,null,V(l(i).class,e=>(p(),h(S,{key:e[0]},[n.has(e[0])?(p(),h("span",{key:0,class:"bold green span-wrapper",onClick:c=>m.value=e[0]},y(e[1].name),9,ke)):N("",!0)],64))),128))]),_:1})]),b(j,{name:"fade",mode:"out-in"},{default:B(()=>[(p(),q(Y,null,[typeof m.value=="number"&&n.has(m.value)?(p(),q(me,{key:m.value,"ability-info":l($),"class-info":n.get(m.value)},null,8,["ability-info","class-info"])):N("",!0)],1024))]),_:1})])):N("",!0)]),_:1})]))}});const Be=W(Ae,[["__scopeId","data-v-27edf9da"]]);export{Be as default};
