import{d as D,u as F,h as b,E as V,H as N,J as T,c,b as r,m as j,K as I,F as _,q as g,e as p,w as v,a as d,j as L,T as R,p as $,g as q,x as E,o as i,t as w,r as z,B as C,_ as H}from"./index.9bad6e8a.js";import{R as k}from"./error.596be0a1.js";import{d as K}from"./game.0f047f01.js";import{B as h}from"./Button.5666a9f2.js";const f=u=>($("data-v-1692f06d"),u=u(),q(),u),J=f(()=>r("p",{class:"text-line"},"Classes descrevem a voca\xE7\xE3o de um personagem e suas aptid\xF5es especiais. Hora de escolher a sua.",-1)),P=f(()=>r("p",{class:"text-line small"},[E("Se ficar em d\xFAvida, apenas clique em "),r("span",{class:"bold"},"continuar"),E(".")],-1)),U=f(()=>r("p",{class:"text-line small"},"A Ringo escolher\xE1 uma classe aleat\xF3ria para voc\xEA.",-1)),G={class:"class-select-area"},O=["disabled","value"],Q={class:"button-area"},W={key:0,class:"class-info-area"},X=f(()=>r("h2",null,"Detalhes",-1)),Y={class:"class-name-wrapper"},Z={key:0,class:"bold green span-wrapper"},ee=D({__name:"Classes",setup(u){const{character:n}=F(),{classes:S}=K(),t=b([]);n.books.forEach(a=>{const s=S.get(a);if(s)for(const[e,o]of s.entries())t.push([e,o,a])});const l=V(null),x=b(new Map),B=N(()=>t.length<1||typeof l.value!="number");t.length>0&&(Promise.all(n.books.map(async a=>{try{const s=await fetch(`/ringo/api/classes/book${a.toString(10)}.json`);if(s.status===404)return;const e=await s.json();if(Array.isArray(e))e.forEach(o=>x.set(o.codigo,o));else throw new k("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as classes.")}catch(s){s instanceof Error&&console.error(s)}})),t.sort((a,s)=>a[1].localeCompare(s[1],"pt-br")));function y(a,s,e,o=1){if(typeof a!="number"||typeof s!="string"||typeof e!="number"){if(l.value===null)return;a=l.value;const m=t.find(M=>M[0]===a);if(!m)throw new k("N\xE3o foi poss\xEDvel encontrar a classe na lista.");s=m[1],e=m[2]}n.class.set(a,{book:e,level:o,name:s})}function A(){if(n.class.size===0){const a=Math.floor(Math.random()*t.length),s=typeof l.value=="number"?l.value:a;y(...t[s])}}return T(()=>{const a=(e,o)=>o===e[0],s=new Set;for(const e of n.class.keys())t.some(o=>a(o,e))||s.add(e);s.forEach(e=>n.class.delete(e))}),(a,s)=>(i(),c("section",null,[J,P,U,r("div",G,[j(r("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e)},[(i(!0),c(_,null,g(t,e=>(i(),c("option",{key:e[0],disabled:d(n).class.has(e[0]),value:e[0]},w(e[1]),9,O))),128))],512),[[I,l.value,void 0,{number:!0}]])]),r("div",Q,[p(h,{disabled:t.length<1,text:"Continuar",onClick:v(A,["prevent"])},null,8,["disabled","onClick"]),p(h,{disabled:d(B),text:"Adicionar classe",onClick:s[1]||(s[1]=v(e=>y(),["prevent"]))},null,8,["disabled"]),p(h,{text:"Voltar",onClick:s[2]||(s[2]=v(e=>d(z).push({name:"create-char-step-2"}),["prevent"]))})]),p(R,{name:"fade",mode:"out-in"},{default:L(()=>[d(n).class.size>0?(i(),c("div",W,[X,r("div",Y,[(i(!0),c(_,null,g(d(n).class,e=>(i(),c(_,{key:e[0]},[x.has(e[0])?(i(),c("span",Z,w(e[1].name),1)):C("",!0)],64))),128))])])):C("",!0)]),_:1})]))}});const ne=H(ee,[["__scopeId","data-v-1692f06d"]]);export{ne as default};
