import{d as P,k as E,o as f,c as v,a as t,A as x,t as y,u,p as K,h as R,_ as W,f as G,E as H,r as M,j as q,G as O,y as U,H as J,F as D,m as F,b as w,w as N,l as B,I as Q,T as V,q as j,g as T,K as X,e as Y}from"./index.ddb64d58.js";import{R as b,j as A,f as Z}from"./helpers.3620516d.js";import{d as ee,e as se,f as ae}from"./game.f02153fd.js";import{B as L}from"./Button.48ce4cc1.js";const g=p=>(K("data-v-b911aaa3"),p=p(),R(),p),te={class:"class-bonuses"},oe={class:"first-title div-title"},ne=g(()=>t("span",{class:"bold green-text"},"Dado de vida:",-1)),re={class:"div-title"},ie=g(()=>t("span",{class:"bold green-text"},"Armaduras:",-1)),ce={class:"div-title"},le=g(()=>t("span",{class:"bold green-text"},"Armas:",-1)),de={class:"div-title"},ue=g(()=>t("span",{class:"bold green-text"},"Testes de resist\xEAncia:",-1)),pe={class:"div-title"},fe=g(()=>t("span",{class:"bold green-text"},"Per\xEDcias:",-1)),_e=P({__name:"ClassBonuses",props:{abilityInfo:null,classInfo:null},setup(p){const n=p,{weapons:k}=ee(),{charSkill:l}=se(),$=E(()=>`${`${n.classInfo.hp.quantidade}d${n.classInfo.hp.dado}`} por n\xEDvel de ${n.classInfo.nome.toLowerCase()}`),I=E(()=>{const o=n.classInfo.proficiencias.armaduras.map(c=>{switch(c){case 0:return"armaduras leves";case 1:return"armaduras m\xE9dias";case 2:return"armaduras pesadas";case 3:return"escudos";default:throw new b("O tipo da armadura \xE9 inv\xE1lido.")}});return o.length===0?"Nenhuma":A(o)}),i=E(()=>{var m,a;const o=(m=n.classInfo.proficiencias.armas.tipo)==null?void 0:m.map(s=>{switch(s){case 0:return"armas simples";case 1:return"armas marciais";default:throw new b("O tipo da arma \xE9 inv\xE1lido.")}}),c=(a=n.classInfo.proficiencias.armas.avulso)==null?void 0:a.map(s=>{const e=k.get(s);if(!e)throw new b("N\xE3o foi poss\xEDvel determinar o nome da arma.");return e.toLowerCase()}),r=[];return Array.isArray(o)&&r.push(...o),Array.isArray(c)&&r.push(...c),r.length===0?"Nenhuma":A(r)}),_=E(()=>{const o=n.classInfo.proficiencias.resistencia.map(c=>{var m;const r=(m=n.abilityInfo.get(c))==null?void 0:m.nome;if(!r)throw new b("N\xE3o foi poss\xEDvel determinar o nome da habilidade.");return r});return A(o)}),h=E(()=>{var r;const o=`escolha ${n.classInfo.proficiencias.pericias.quantidade.toLocaleString("pt-br")}`,c=(r=n.classInfo.proficiencias.pericias.lista)==null?void 0:r.map(m=>{const a=l.get(m);if(!a)throw new b("N\xE3o foi poss\xEDvel determinar o nome da per\xEDcia.");return a});return`${o} ${c?`dentre ${A(c)}`:"quaisquer"}`});return(o,c)=>(f(),v("section",te,[t("div",oe,[ne,x(y(u($)),1)]),t("div",re,[ie,x(y(u(I)),1)]),t("div",ce,[le,x(y(u(i)),1)]),t("div",de,[ue,x(y(u(_)),1)]),t("div",pe,[fe,x(y(u(h)),1)])]))}});const me=W(_e,[["__scopeId","data-v-b911aaa3"]]),C=p=>(K("data-v-cf9d92ec"),p=p(),R(),p),he=C(()=>t("p",{class:"text-line"},"Classes descrevem a voca\xE7\xE3o de um personagem e suas aptid\xF5es especiais. Hora de escolher a sua.",-1)),ve=C(()=>t("p",{class:"text-line small"},[x("Se ficar em d\xFAvida, apenas clique em "),t("span",{class:"bold"},"continuar"),x(".")],-1)),xe=C(()=>t("p",{class:"text-line small"},"A Ringo escolher\xE1 uma classe aleat\xF3ria para voc\xEA.",-1)),ye={class:"class-select-area"},be=["disabled","value"],we={class:"button-area"},Ee={key:0,class:"class-info-area"},ge=C(()=>t("h2",null,"Detalhes",-1)),ke={class:"class-name-wrapper"},Ae=["onClick"],Ce=P({__name:"Classes",async setup(p){let n,k;const{character:l}=G(),{classes:$}=ae(),I=([n,k]=H(()=>Z()),n=await n,k(),n),i=M([]);l.books.forEach(a=>{const s=$.get(a);if(s)for(const[e,d]of s.entries())i.push([e,d,a])});const _=q(null),h=q(null),o=M(new Map),c=E(()=>i.length<1||typeof _.value!="number");i.length>0&&(Promise.all(l.books.map(async a=>{try{const s=await fetch(`/ringo/api/classes/book${a.toString(10)}.json`);if(s.status===404)return;const e=await s.json();if(Array.isArray(e))e.forEach(d=>o.set(d.codigo,d));else throw new b("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as classes.")}catch(s){s instanceof Error&&console.error(s)}})),i.sort((a,s)=>a[1].localeCompare(s[1],"pt-br")));function r(a,s,e,d=1){if(typeof a!="number"||typeof s!="string"||typeof e!="number"){if(_.value===null)return;a=_.value;const S=i.find(z=>z[0]===a);if(!S)throw new b("N\xE3o foi poss\xEDvel encontrar a classe na lista.");s=S[1],e=S[2]}l.class.set(a,{book:e,level:d,name:s}),h.value=a}function m(){if(l.class.size===0){const a=Math.floor(Math.random()*i.length),s=typeof _.value=="number"?_.value:a;r(...i[s])}}return O(()=>{const a=(e,d)=>d===e[0],s=new Set;for(const e of l.class.keys())i.some(d=>a(d,e))||s.add(e);s.forEach(e=>l.class.delete(e))}),(a,s)=>(f(),v("section",null,[he,ve,xe,t("div",ye,[U(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e)},[(f(!0),v(D,null,F(i,e=>(f(),v("option",{key:e[0],disabled:u(l).class.has(e[0]),value:e[0]},y(e[1]),9,be))),128))],512),[[J,_.value,void 0,{number:!0}]])]),t("div",we,[w(L,{disabled:i.length<1,text:"Continuar",onClick:N(m,["prevent"])},null,8,["disabled","onClick"]),w(L,{disabled:u(c),text:"Adicionar classe",onClick:s[1]||(s[1]=N(e=>r(),["prevent"]))},null,8,["disabled"]),w(L,{text:"Voltar",onClick:s[2]||(s[2]=N(e=>u(Y).push({name:"create-char-step-2"}),["prevent"]))})]),w(V,{name:"fade",mode:"out-in"},{default:B(()=>[u(l).class.size>0?(f(),v("div",Ee,[ge,t("div",ke,[w(Q,null,{default:B(()=>[(f(!0),v(D,null,F(u(l).class,e=>(f(),v(D,{key:e[0]},[o.has(e[0])?(f(),v("span",{key:0,class:"bold green span-wrapper",onClick:d=>h.value=e[0]},y(e[1].name),9,Ae)):T("",!0)],64))),128))]),_:1})]),w(V,{name:"fade",mode:"out-in"},{default:B(()=>[(f(),j(X,null,[typeof h.value=="number"&&o.has(h.value)?(f(),j(me,{key:h.value,"ability-info":u(I),"class-info":o.get(h.value)},null,8,["ability-info","class-info"])):T("",!0)],1024))]),_:1})])):T("",!0)]),_:1})]))}});const Ne=W(Ce,[["__scopeId","data-v-cf9d92ec"]]);export{Ne as default};
