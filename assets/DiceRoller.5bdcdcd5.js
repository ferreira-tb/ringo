var J=Object.defineProperty;var K=(a,e,s)=>e in a?J(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var c=(a,e,s)=>(K(a,typeof e!="symbol"?e+"":e,s),s);import{i as O,j as P,k as g,d as U,s as z,o as h,c as f,b as _,l as T,F as E,m as F,u as n,a as o,t as b,T as Y,p as L,h as M,_ as X,r as Z,q as B,g as H,v as I,x as ee,y as k,z as w,A as S,B as C,n as N,C as R}from"./index.0b507058.js";import{g as j,R as q,r as A}from"./helpers.8def956a.js";import{B as m}from"./Button.0845c541.js";const G=O("dice",()=>{const a=[],e=P([2,4,6,8,10,12,20,100]),s=g(null),p=g(1),i=g(0),r=g("normal");return{diceHistory:a,diceTypes:e,chosenDice:s,diceAmount:p,modifier:i,rollType:r}});class te{constructor(e,s){c(this,"type");c(this,"value");c(this,"other");this.type=s,this.value=A(e),this.other=s==="normal"?null:A(e)}}class se{constructor(e,s,p,i){c(this,"date",Date.now());c(this,"dice");c(this,"amount");c(this,"modToSum");c(this,"finalResult");c(this,"text");c(this,"type");c(this,"rolls",[]);this.dice=e,this.amount=s,this.modToSum=p,this.text=j(e,s,p),this.type=e===20?i:"normal";let r=0;for(;r<s;){r++;const u=new te(e,this.type);this.rolls.push(u)}if(this.rolls.length===0)throw new q("Nenhum dado foi rolado.");this.finalResult=this.rolls.reduce((u,t)=>u+(()=>{switch(this.type){case"normal":return t.value;case"vantagem":return t.value>=t.other?t.value:t.other;case"desvantagem":return t.value<=t.other?t.value:t.other}})(),this.modToSum)}}const oe=a=>(L("data-v-7cc32e0b"),a=a(),M(),a),ae={class:"history-area"},le=oe(()=>o("h2",null,"Hist\xF3rico",-1)),ne=["onClick"],ie={class:"small"},re=U({__name:"DiceHistory",setup(a){const e=G(),{diceHistory:s}=e,{chosenDice:p,diceAmount:i,modifier:r,rollType:u}=z(e);function t(v){p.value=v.dice,i.value=v.amount,r.value=v.modToSum,u.value=v.type}function x(v){return`${new Date(v).toLocaleTimeString("pt-br")}`}return(v,D)=>(h(),f("section",ae,[le,_(Y,{name:"list"},{default:T(()=>[(h(!0),f(E,null,F(n(s),y=>(h(),f("div",{key:y.date,onClick:$=>t(y)},[o("span",null,b(`${y.text} = ${y.finalResult}`),1),o("span",ie,b(x(y.date)),1)],8,ne))),128))]),_:1})]))}});const ue=X(re,[["__scopeId","data-v-7cc32e0b"]]),Q=a=>(L("data-v-1a3ecb50"),a=a(),M(),a),de={class:"dice-roller"},ce={class:"result-area"},ve={class:"result-text"},_e={class:"mod-area"},me={class:"mod-row"},pe=Q(()=>o("span",{class:"bold"},"Quantidade",-1)),he={class:"bold green-text"},ye={class:"mod-row"},fe=Q(()=>o("span",{class:"bold"},"Modificador",-1)),xe={class:"radio-area"},be=["disabled"],ge=["disabled"],De=["disabled"],ke={class:"dice-area"},we=U({__name:"DiceRoller",setup(a){const e=G(),{diceHistory:s,diceTypes:p}=e,{chosenDice:i,diceAmount:r,modifier:u,rollType:t}=z(e),x=Z({width:"80%",height:"3em",fontSize:"1em",fontWeight:550}),v=B(()=>i.value===null?null:j(i.value,r.value,u.value)),D=B(()=>({bold:!0,"green-text":u.value>=0,"red-text":u.value<0}));function y(){if(i.value===null)throw new q("Nenhum dado foi escolhido.");const V=new se(i.value,r.value,u.value,t.value);for(;s.length>10;)s.pop();s.unshift(V)}function $(){r.value>1&&r.value--}return(V,l)=>(h(),f("main",de,[o("div",ce,[o("div",ve,[_(I,{name:"fade",mode:"out-in"},{default:T(()=>[n(v)?(h(),f("span",{key:n(v)},b(n(v)),1)):H("",!0)]),_:1})]),_(m,{class:"roll-button",text:"Rolar",disabled:n(i)===null,onClick:y},null,8,["disabled"])]),o("div",_e,[o("div",me,[_(m,{text:"X",onClick:l[0]||(l[0]=d=>r.value=1)}),pe,_(m,{text:"-",onClick:$}),o("span",he,b(n(r)),1),_(m,{text:"+",onClick:l[1]||(l[1]=d=>r.value++)})]),o("div",ye,[_(m,{text:"X",onClick:l[2]||(l[2]=d=>u.value=0)}),fe,_(m,{text:"-",onClick:l[3]||(l[3]=d=>u.value--)}),o("span",{class:ee(n(D))},b(n(u)),3),_(m,{text:"+",onClick:l[4]||(l[4]=d=>u.value++)})]),o("div",xe,[o("label",null,[k(o("input",{type:"radio",value:"normal","onUpdate:modelValue":l[5]||(l[5]=d=>S(t)?t.value=d:null),disabled:n(i)!==20},null,8,be),[[w,n(t)]]),C(" Normal ")]),o("label",null,[k(o("input",{type:"radio",value:"vantagem","onUpdate:modelValue":l[6]||(l[6]=d=>S(t)?t.value=d:null),disabled:n(i)!==20},null,8,ge),[[w,n(t)]]),C(" Vantagem ")]),o("label",null,[k(o("input",{type:"radio",value:"desvantagem","onUpdate:modelValue":l[7]||(l[7]=d=>S(t)?t.value=d:null),disabled:n(i)!==20},null,8,De),[[w,n(t)]]),C(" Desvantagem ")])])]),o("div",ke,[(h(!0),f(E,null,F(n(p),(d,W)=>(h(),R(m,{style:N(x),text:`D${d}`,key:W,onClick:Se=>i.value=d},null,8,["style","text","onClick"]))),128)),_(m,{text:"Salvos",style:N(x)},null,8,["style"])]),_(I,{name:"fade",mode:"out-in"},{default:T(()=>[n(s).length>0?(h(),R(ue,{key:0})):H("",!0)]),_:1})]))}});const Be=X(we,[["__scopeId","data-v-1a3ecb50"]]);export{Be as default};
