import{d as w,s as j,o as r,c as f,b as a,i as D,F as k,j as z,u as o,a as e,t as g,T as K,p as L,h as O,_ as S,k as I,l as N,m as H,q as C,v as Q,g as b,x as E,r as W,y as B,z as V,A as M,B as A,n as F,e as J}from"./index.917d137d.js";import{u as U,D as P,a as Y}from"./objects.a9a7f6af.js";import{R as X,g as Z}from"./helpers.da37dee5.js";import{B as m}from"./Button.2abf4127.js";const ee=u=>(L("data-v-de20755e"),u=u(),O(),u),te={class:"history-area"},le=ee(()=>e("h2",null,"Hist\xF3rico",-1)),oe=["onClick"],se={class:"small"},ne=w({__name:"DiceHistory",setup(u){const y=U(),{diceHistory:i}=y,{chosenDice:R,diceAmount:s,modifier:n,rollType:p}=j(y);function c(_){R.value=_.dice,s.value=_.amount,n.value=_.modToSum,p.value=_.type}function $(_){return`${new Date(_).toLocaleTimeString("pt-br")}`}return(_,x)=>(r(),f("section",te,[le,a(K,{name:"list"},{default:D(()=>[(r(!0),f(k,null,z(o(i),t=>(r(),f("div",{key:t.date,onClick:v=>c(t)},[e("span",null,g(`${t.text} = ${t.finalResult}`),1),e("span",se,g($(t.date)),1)],8,oe))),128))]),_:1})]))}});const ae=S(ne,[["__scopeId","data-v-de20755e"]]),ue=w({__name:"BlurBackground",emits:["closeModal"],setup(u){return(y,i)=>(r(),f("div",{class:"blur-bg",onClick:i[0]||(i[0]=R=>y.$emit("closeModal"))}))}});const ie=S(ue,[["__scopeId","data-v-f2b57531"]]),de={class:"result-modal"},re={class:"result-area"},ce={class:"rolls"},ve={key:0,class:"other-roll"},_e={key:0,class:"save-area"},me={class:"button-area"},pe=w({__name:"ResultModal",props:{rollResult:null},emits:["hideResult","rollAgain"],setup(u,{emit:y}){const i=u,{diceCollection:R}=U(),s=I(!1),n=I(null),p=N(()=>({bold:!0,"green-text":i.rollResult.finalResult===i.rollResult.maxValue,"red-text":i.rollResult.finalResult===i.rollResult.minValue}));function c(x){return{"green-text":x.value===i.rollResult.dice,"red-text":x.value===1}}function $(){s.value=!1,n.value=null,y("rollAgain")}function _(){if(typeof n.value!="string")throw new X("O nome escolhido para a rolagem \xE9 inv\xE1lido.");if(n.value.length===0)return;const{dice:x,amount:t,modToSum:v,type:T}=i.rollResult,h=new P(x,t,v,T);R.set(n.value,h),s.value=!1,n.value=null}return(x,t)=>(r(),f(k,null,[a(ie,{onCloseModal:t[0]||(t[0]=v=>x.$emit("hideResult"))}),e("div",de,[e("div",re,[e("div",null,g(u.rollResult.text),1),e("div",{class:H(["final-result",o(p)])},g(u.rollResult.finalResult),3),e("div",ce,[(r(!0),f(k,null,z(u.rollResult.rolls,v=>(r(),f(k,null,[e("span",{class:H(["each-roll",c(v)])},g(v.value),3),u.rollResult.type!=="normal"?(r(),f("span",ve,g(`(${v.other})`),1)):b("",!0)],64))),256))])]),a(E,{name:"fade",mode:"out-in"},{default:D(()=>[s.value?(r(),f("div",_e,[C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=v=>n.value=v),type:"text",maxlength:"50",placeholder:"Digite o nome desejado"},null,512),[[Q,n.value,void 0,{trim:!0}]]),a(m,{text:"OK",onClick:_})])):b("",!0)]),_:1}),e("div",me,[a(m,{text:"Repetir",onClick:$}),a(m,{text:"Salvar",onClick:t[2]||(t[2]=v=>s.value=!0),disabled:s.value},null,8,["disabled"]),a(m,{text:"Voltar",onClick:t[3]||(t[3]=v=>x.$emit("hideResult"))})])])],64))}});const fe=S(pe,[["__scopeId","data-v-0024ada4"]]),q=u=>(L("data-v-26d98ab4"),u=u(),O(),u),xe={class:"dice-roller"},ye={class:"result-area"},ge={class:"result-text"},Re={class:"mod-area"},$e={class:"mod-row"},he=q(()=>e("span",{class:"bold"},"Quantidade",-1)),ke={class:"bold green-text"},be={class:"mod-row"},Ce=q(()=>e("span",{class:"bold"},"Modificador",-1)),De={class:"radio-area"},we=["disabled"],Se=["disabled"],Te=["disabled"],Be={class:"dice-area"},Ve=w({__name:"DiceRoller",setup(u){const y=U(),{diceHistory:i,diceTypes:R}=y,{chosenDice:s,diceAmount:n,modifier:p,rollType:c}=j(y),$=W({width:"80%",height:"3em",fontSize:"1em",fontWeight:550}),_=N(()=>s.value===null?null:Z(s.value,n.value,p.value)),x=N(()=>({bold:!0,"green-text":p.value>=0,"red-text":p.value<0})),t=I(null);function v(){if(s.value===null)throw new X("Nenhum dado foi escolhido.");const h=new Y(s.value,n.value,p.value,c.value);for(t.value=h;i.length>5;)i.pop();i.unshift(h)}function T(){n.value>1&&n.value--}return(h,l)=>(r(),f("main",xe,[e("div",ye,[e("div",ge,[a(E,{name:"fade",mode:"out-in"},{default:D(()=>[o(_)?(r(),f("span",{key:o(_)},g(o(_)),1)):b("",!0)]),_:1})]),a(m,{class:"roll-button",text:"Rolar",disabled:o(s)===null,onClick:v},null,8,["disabled"])]),t.value?(r(),B(fe,{key:0,rollResult:t.value,onHideResult:l[0]||(l[0]=d=>t.value=null),onRollAgain:v},null,8,["rollResult"])):b("",!0),e("div",Re,[e("div",$e,[a(m,{text:"X",onClick:l[1]||(l[1]=d=>n.value=1)}),he,a(m,{text:"-",onClick:T}),e("span",ke,g(o(n)),1),a(m,{text:"+",onClick:l[2]||(l[2]=d=>n.value++)})]),e("div",be,[a(m,{text:"X",onClick:l[3]||(l[3]=d=>p.value=0)}),Ce,a(m,{text:"-",onClick:l[4]||(l[4]=d=>p.value--)}),e("span",{class:H(o(x))},g(o(p)),3),a(m,{text:"+",onClick:l[5]||(l[5]=d=>p.value++)})]),e("div",De,[e("label",null,[C(e("input",{type:"radio",value:"normal","onUpdate:modelValue":l[6]||(l[6]=d=>M(c)?c.value=d:null),disabled:o(s)!==20},null,8,we),[[V,o(c)]]),A(" Normal ")]),e("label",null,[C(e("input",{type:"radio",value:"vantagem","onUpdate:modelValue":l[7]||(l[7]=d=>M(c)?c.value=d:null),disabled:o(s)!==20},null,8,Se),[[V,o(c)]]),A(" Vantagem ")]),e("label",null,[C(e("input",{type:"radio",value:"desvantagem","onUpdate:modelValue":l[8]||(l[8]=d=>M(c)?c.value=d:null),disabled:o(s)!==20},null,8,Te),[[V,o(c)]]),A(" Desvantagem ")])])]),e("div",Be,[(r(!0),f(k,null,z(o(R),(d,G)=>(r(),B(m,{style:F($),text:`D${d}`,key:G,onClick:Me=>s.value=d},null,8,["style","text","onClick"]))),128)),a(m,{text:"Cole\xE7\xE3o",style:F($),onClick:l[9]||(l[9]=d=>o(J).push({name:"dice-collection"}))},null,8,["style"])]),a(E,{name:"fade",mode:"out-in"},{default:D(()=>[o(i).length>0?(r(),B(ae,{key:0})):b("",!0)]),_:1})]))}});const Ee=S(Ve,[["__scopeId","data-v-26d98ab4"]]);export{Ee as default};
