var W=Object.defineProperty;var X=(t,o,u)=>o in t?W(t,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[o]=u;var T=(t,o,u)=>(X(t,typeof o!="symbol"?o+"":o,u),u);import{d as w,o as e,c as n,a,F as v,m as x,t as l,_ as A,B as m,g as p,C as S,f as J,k as Y,q as g,u as c,b as C,l as K,v as O,p as U,h as G,J as Z,r as F,K as ee,y as te,L as se,w as D,e as q}from"./index.4314c981.js";import{a as ne,b as oe,c as ae}from"./game.c24fe2d8.js";import{R as ce,f as re}from"./helpers.1b27ed9b.js";import{B as z}from"./Button.0ce6ea82.js";const ie={class:"standard-table"},le={class:"bold green-text"},ue=w({__name:"Table",props:{content:null},setup(t){return(o,u)=>(e(),n("table",ie,[a("tr",null,[(e(!0),n(v,null,x(t.content.th,s=>(e(),n("th",le,l(s),1))),256))]),(e(!0),n(v,null,x(t.content.tr,s=>(e(),n("tr",null,[(e(!0),n(v,null,x(s,$=>(e(),n("td",null,l($),1))),256))]))),256))]))}});const de=A(ue,[["__scopeId","data-v-274f379b"]]),_e={class:"standard-desc-list"},pe={class:"green-text desc-list-title"},he=w({__name:"DescriptionList",props:{content:null},setup(t){return(o,u)=>(e(),n("dl",_e,[(e(!0),n(v,null,x(t.content,s=>(e(),n(v,{key:s[0]},[a("dt",pe,l(s[0]),1),a("dd",null,l(s[1]),1)],64))),128))]))}});const fe=A(he,[["__scopeId","data-v-778f4074"]]),be={class:"race-ability"},me={class:"bold green-text"},ve={class:"race-ability"},ge={key:1,class:"race-ability-details"},xe=w({__name:"RaceAbility",props:{bonus:null},setup(t){return(o,u)=>(e(),n("section",null,[a("div",be,[a("span",me,l(`${t.bonus.nome}. `),1),m(" "+l(t.bonus.efeito),1)]),t.bonus.extra?(e(!0),n(v,{key:0},x(t.bonus.extra,s=>(e(),n("div",ve,l(s),1))),256)):p("",!0),t.bonus.detalhes?(e(),n("div",ge,[t.bonus.detalhes.tipo==="table"?(e(),S(de,{key:0,content:t.bonus.detalhes.conteudo},null,8,["content"])):p("",!0),t.bonus.detalhes.tipo==="description_list"?(e(),S(fe,{key:1,content:t.bonus.detalhes.conteudo},null,8,["content"])):p("",!0)])):p("",!0)]))}});const P=A(xe,[["__scopeId","data-v-6cd6e327"]]),ye={class:"tooltip-wrapper"},ke={class:"tooltip-box"},$e=w({__name:"Tooltip",props:{text:null},setup(t){return(o,u)=>(e(),n("div",ye,[a("div",ke,l(t.text),1)]))}});const Ie=A($e,[["__scopeId","data-v-dbf8722c"]]),y=t=>(U("data-v-95692ebb"),t=t(),G(),t),Ee={class:"race-bonuses"},Se=y(()=>a("h2",null,"Detalhes",-1)),we={key:0,class:"plus-wrapper"},Ae=["onClick"],Ce={class:"plus"},Re={key:1,class:"minus-wrapper"},Le=["onClick"],Be={class:"minus"},Te={class:"first-title"},Ve=y(()=>a("span",{class:"bold span-title green-text"},"Expectativa de vida:",-1)),Me={key:0},De=y(()=>a("span",{class:"bold span-title green-text"},"Peso m\xE9dio:",-1)),ze=y(()=>a("span",{class:"bold span-title green-text"},"Altura:",-1)),Ne={key:1},je=y(()=>a("span",{class:"bold span-title green-text"},"Tamanho",-1)),Fe=y(()=>a("span",{class:"bold span-title green-text"},"Deslocamento:",-1)),qe=y(()=>a("span",{class:"bold span-title green-text"},"Idiomas:",-1)),Pe={key:2},Je=y(()=>a("h2",null,"Tra\xE7os Raciais",-1)),Ke=w({__name:"RaceBonuses",props:{abilityInfo:null,raceInfo:null},setup(t){const o=t,{character:u}=J(),s=Y(null),$=g(()=>I("pos")),R=g(()=>I("neg"));class h{constructor(b,i,k){T(this,"name");T(this,"value");T(this,"description");this.name=b,this.value=i,this.description=k}}function I(f){const b=[];for(const[i,k]of Object.entries(o.raceInfo.habilidades)){const M=o.abilityInfo.get(i);if(!M)throw new ce(`A habilidade "${i}" n\xE3o existe no mapa.`);const j=new h(M.nome,k,M.descricao);(f==="pos"&&Math.sign(k)===1||f==="neg"&&Math.sign(k)===-1)&&b.push(j)}return b}const L=g(()=>`${o.raceInfo.idade.toLocaleString("pt-br")} anos`),B=g(()=>o.raceInfo.peso?`${o.raceInfo.peso.toLocaleString("pt-br")} quilos`:null),d=g(()=>{const f=o.raceInfo.altura.min,b=o.raceInfo.altura.max,i=`${b.toLocaleString("pt-br")} ${b<2?"metro":"metros"}`;return f?`Entre ${f.toLocaleString("pt-br")} e ${i}`:i}),r=ne(),_=g(()=>r.creatureSize.get(o.raceInfo.tamanho)),E=g(()=>`${o.raceInfo.deslocamento.toLocaleString("pt-br")} metros`),H=oe(),Q=g(()=>o.raceInfo.idiomas.map(b=>H.languages.get(b)).join(", ")),V=g(()=>{const f=o.raceInfo.visao_escuro;return typeof f=="number"?{nome:"Vis\xE3o no Escuro",efeito:`Voc\xEA enxerga na penumbra a at\xE9 ${f.toLocaleString("pt-br")} metros como se fosse luz plena, e no escuro como se fosse na penumbra. Voc\xEA n\xE3o pode discernir cores no escuro, apenas tons de cinza.`}:null});return(f,b)=>(e(),n("section",Ee,[Se,a("div",null,[c($).length>0?(e(),n("div",we,[(e(!0),n(v,null,x(c($),i=>(e(),n("span",{class:"bold span-wrapper",onClick:k=>s.value=i.description},[m(l(i.name)+" ",1),a("span",Ce,l(` +${i.value.toString(10)}`),1)],8,Ae))),256))])):p("",!0),c(R).length>0?(e(),n("div",Re,[(e(!0),n(v,null,x(c(R),i=>(e(),n("span",{class:"bold span-wrapper",onClick:k=>s.value=i.description},[m(l(i.name)+" ",1),a("span",Be,l(` -${i.value.toString(10)}`),1)],8,Le))),256))])):p("",!0)]),C(O,{name:"fade",mode:"out-in"},{default:K(()=>[s.value?(e(),S(Ie,{text:s.value,key:s.value},null,8,["text"])):p("",!0)]),_:1}),a("div",Te,[Ve,m(l(c(L)),1)]),c(B)?(e(),n("div",Me,[De,m(l(c(B)),1)])):p("",!0),a("div",null,[ze,m(l(c(d)),1)]),c(_)?(e(),n("div",Ne,[je,m(l(c(_)),1)])):p("",!0),a("div",null,[Fe,m(l(c(E)),1)]),a("div",null,[qe,m(l(c(Q)),1)]),t.raceInfo.bonus.length>0?(e(),n("div",Pe,[Je,c(V)?(e(),S(P,{bonus:c(V),key:c(V).nome},null,8,["bonus"])):p("",!0),(e(!0),n(v,null,x(t.raceInfo.bonus,i=>(e(),n(v,{key:i.id},[c(u).books.includes(i.livro)?(e(),S(P,{key:0,bonus:i},null,8,["bonus"])):p("",!0)],64))),128))])):p("",!0)]))}});const Oe=A(Ke,[["__scopeId","data-v-95692ebb"]]),N=t=>(U("data-v-f9289580"),t=t(),G(),t),Ue=N(()=>a("p",{class:"text-line"},"Escolha uma ra\xE7a para seu personagem. Ela definir\xE1 sua apar\xEAncia geral e seus talentos naturais.",-1)),Ge=N(()=>a("p",{class:"text-line small"},[m("Se ficar em d\xFAvida, apenas clique em "),a("span",{class:"bold"},"continuar"),m(".")],-1)),He=N(()=>a("p",{class:"text-line small"},"A Ringo escolher\xE1 uma ra\xE7a aleat\xF3ria para voc\xEA.",-1)),Qe={class:"races-area"},We=["value"],Xe={class:"button-area"},Ye=w({__name:"Races",async setup(t){let o,u;const{character:s}=J(),{races:$}=ae(),R=([o,u]=Z(()=>re()),o=await o,u(),o),h=F([]);s.books.forEach(d=>{const r=$.get(d);if(r)for(const[_,E]of r.entries())h.push([_,E,d])});const I=F(new Map);h.length>0&&(Promise.all(s.books.map(async d=>{try{const r=await fetch(`/ringo/api/races/book${d.toString(10)}.json`);if(r.status===404)return;const _=await r.json();Array.isArray(_)&&_.forEach(E=>I.set(E.codigo,E))}catch(r){r instanceof Error&&console.error(r)}})),h.sort((d,r)=>d[1].localeCompare(r[1],"pt-br")));function L(){const d=Math.floor(Math.random()*h.length);s.race.id=h[d][0],s.race.book=h[d][2]}function B(){s.race.id===null&&L(),q.push({name:"create-char-step-3"})}return ee(()=>{const d=r=>s.race.id===r[0]?(s.race.book=r[2],!0):!1;h.some(d)||(s.race.id=null,s.race.book=null)}),(d,r)=>(e(),n("section",null,[Ue,Ge,He,a("div",Qe,[te(a("select",{"onUpdate:modelValue":r[0]||(r[0]=_=>c(s).race.id=_)},[(e(!0),n(v,null,x(h,_=>(e(),n("option",{key:_[0],value:_[0]},l(_[1]),9,We))),128))],512),[[se,c(s).race.id,void 0,{number:!0}]])]),a("div",Xe,[C(z,{text:"Continuar",disabled:h.length<1,onClick:D(B,["prevent"])},null,8,["disabled","onClick"]),C(z,{text:"Escolha pra mim",disabled:h.length<1,onClick:D(L,["prevent"])},null,8,["disabled","onClick"]),C(z,{text:"Voltar",onClick:r[1]||(r[1]=D(_=>c(q).push({name:"create-char-step-1"}),["prevent"]))})]),C(O,{name:"fade",mode:"out-in"},{default:K(()=>[typeof c(s).race.id=="number"&&I.has(c(s).race.id)?(e(),S(Oe,{key:c(s).race.id,"ability-info":c(R),"race-info":I.get(c(s).race.id)},null,8,["ability-info","race-info"])):p("",!0)]),_:1})]))}});const ot=A(Ye,[["__scopeId","data-v-f9289580"]]);export{ot as default};
