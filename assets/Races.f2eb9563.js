var X=Object.defineProperty;var Y=(e,n,u)=>n in e?X(e,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[n]=u;var T=(e,n,u)=>(Y(e,typeof n!="symbol"?n+"":n,u),u);import{d as S,o as t,c as o,b as a,F as g,q as x,t as l,_ as A,x as m,B as p,f as w,u as G,C as Z,D as v,a as c,e as C,j as H,T as O,p as U,g as J,E as ee,h as F,G as te,m as se,H as ne,w as D,r as q}from"./index.91ca4d6e.js";import{a as oe,b as ae,c as ce}from"./game.c452a8a4.js";import{R as K}from"./error.596be0a1.js";import{B as j}from"./Button.ec3a8ee0.js";async function re(){const n=await(await fetch("/ringo/api/ability.json")).json();if(!Array.isArray(n))throw new K("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as habilidades.");const u=new Map;return n.forEach(s=>u.set(s.sigla,s)),u}const ie={class:"standard-table"},le={class:"bold green-text"},ue=S({__name:"Table",props:{content:null},setup(e){return(n,u)=>(t(),o("table",ie,[a("tr",null,[(t(!0),o(g,null,x(e.content.th,s=>(t(),o("th",le,l(s),1))),256))]),(t(!0),o(g,null,x(e.content.tr,s=>(t(),o("tr",null,[(t(!0),o(g,null,x(s,$=>(t(),o("td",null,l($),1))),256))]))),256))]))}});const de=A(ue,[["__scopeId","data-v-274f379b"]]),_e={class:"standard-desc-list"},pe={class:"green-text desc-list-title"},fe=S({__name:"DescriptionList",props:{content:null},setup(e){return(n,u)=>(t(),o("dl",_e,[(t(!0),o(g,null,x(e.content,s=>(t(),o(g,{key:s[0]},[a("dt",pe,l(s[0]),1),a("dd",null,l(s[1]),1)],64))),128))]))}});const he=A(fe,[["__scopeId","data-v-778f4074"]]),be={class:"race-ability"},me={class:"bold green-text"},ge={class:"race-ability"},ve={key:1,class:"race-ability-details"},xe=S({__name:"RaceAbility",props:{bonus:null},setup(e){return(n,u)=>(t(),o("section",null,[a("div",be,[a("span",me,l(`${e.bonus.nome}. `),1),m(" "+l(e.bonus.efeito),1)]),e.bonus.extra?(t(!0),o(g,{key:0},x(e.bonus.extra,s=>(t(),o("div",ge,l(s),1))),256)):p("",!0),e.bonus.detalhes?(t(),o("div",ve,[e.bonus.detalhes.tipo==="table"?(t(),w(de,{key:0,content:e.bonus.detalhes.conteudo},null,8,["content"])):p("",!0),e.bonus.detalhes.tipo==="description_list"?(t(),w(he,{key:1,content:e.bonus.detalhes.conteudo},null,8,["content"])):p("",!0)])):p("",!0)]))}});const P=A(xe,[["__scopeId","data-v-aedf4fb9"]]),ye={class:"tooltip-wrapper"},ke={class:"tooltip-box"},$e=S({__name:"Tooltip",props:{text:null},setup(e){return(n,u)=>(t(),o("div",ye,[a("div",ke,l(e.text),1)]))}});const Ee=A($e,[["__scopeId","data-v-dbf8722c"]]),y=e=>(U("data-v-801467fe"),e=e(),J(),e),Ie={class:"race-bonuses"},we=y(()=>a("h2",null,"Detalhes",-1)),Se={key:0,class:"plus-wrapper"},Ae=["onClick"],Ce={class:"plus"},Re={key:1,class:"minus-wrapper"},Le=["onClick"],Me={class:"minus"},Te={class:"first-title"},Be=y(()=>a("span",{class:"bold span-title green-text"},"Expectativa de vida:",-1)),Ve={key:0},De=y(()=>a("span",{class:"bold span-title green-text"},"Peso m\xE9dio:",-1)),je=y(()=>a("span",{class:"bold span-title green-text"},"Altura:",-1)),Ne={key:1},ze=y(()=>a("span",{class:"bold span-title green-text"},"Tamanho",-1)),Fe=y(()=>a("span",{class:"bold span-title green-text"},"Deslocamento:",-1)),qe=y(()=>a("span",{class:"bold span-title green-text"},"Idiomas:",-1)),Pe={key:2},Ge=y(()=>a("h2",null,"Tra\xE7os Raciais",-1)),He=S({__name:"RaceBonuses",props:{abilityInfo:null,raceInfo:null},setup(e){const n=e,{character:u}=G(),s=Z(null),$=v(()=>E("pos")),R=v(()=>E("neg"));class f{constructor(b,i,k){T(this,"name");T(this,"value");T(this,"description");this.name=b,this.value=i,this.description=k}}function E(h){const b=[];for(const[i,k]of Object.entries(n.raceInfo.habilidades)){const V=n.abilityInfo.get(i);if(!V)throw new K(`A habilidade "${i}" n\xE3o existe no mapa.`);const z=new f(V.nome,k,V.descricao);(h==="pos"&&Math.sign(k)===1||h==="neg"&&Math.sign(k)===-1)&&b.push(z)}return b}const L=v(()=>`${n.raceInfo.idade.toLocaleString("pt-br")} anos`),M=v(()=>n.raceInfo.peso?`${n.raceInfo.peso.toLocaleString("pt-br")} quilos`:null),d=v(()=>{const h=n.raceInfo.altura.min,b=n.raceInfo.altura.max,i=`${b.toLocaleString("pt-br")} ${b<2?"metro":"metros"}`;return h?`Entre ${h.toLocaleString("pt-br")} e ${i}`:i}),r=oe(),_=v(()=>r.creatureSize.get(n.raceInfo.tamanho)),I=v(()=>`${n.raceInfo.deslocamento.toLocaleString("pt-br")} metros`),Q=ae(),W=v(()=>n.raceInfo.idiomas.map(b=>Q.languages.get(b)).join(", ")),B=v(()=>{const h=n.raceInfo.visao_escuro;return typeof h=="number"?{nome:"Vis\xE3o no Escuro",efeito:`Voc\xEA enxerga na penumbra a at\xE9 ${h.toLocaleString("pt-br")} metros como se fosse luz plena, e no escuro como se fosse na penumbra. Voc\xEA n\xE3o pode discernir cores no escuro, apenas tons de cinza.`}:null});return(h,b)=>(t(),o("section",Ie,[we,a("div",null,[c($).length>0?(t(),o("div",Se,[(t(!0),o(g,null,x(c($),i=>(t(),o("span",{class:"bold span-wrapper",onClick:k=>s.value=i.description},[m(l(i.name)+" ",1),a("span",Ce,l(` +${i.value.toString(10)}`),1)],8,Ae))),256))])):p("",!0),c(R).length>0?(t(),o("div",Re,[(t(!0),o(g,null,x(c(R),i=>(t(),o("span",{class:"bold span-wrapper",onClick:k=>s.value=i.description},[m(l(i.name)+" ",1),a("span",Me,l(` -${i.value.toString(10)}`),1)],8,Le))),256))])):p("",!0)]),C(O,{name:"fade",mode:"out-in"},{default:H(()=>[s.value?(t(),w(Ee,{text:s.value,key:s.value},null,8,["text"])):p("",!0)]),_:1}),a("div",Te,[Be,m(l(c(L)),1)]),c(M)?(t(),o("div",Ve,[De,m(l(c(M)),1)])):p("",!0),a("div",null,[je,m(l(c(d)),1)]),c(_)?(t(),o("div",Ne,[ze,m(l(c(_)),1)])):p("",!0),a("div",null,[Fe,m(l(c(I)),1)]),a("div",null,[qe,m(l(c(W)),1)]),e.raceInfo.bonus.length>0?(t(),o("div",Pe,[Ge,c(B)?(t(),w(P,{bonus:c(B),key:c(B).nome},null,8,["bonus"])):p("",!0),(t(!0),o(g,null,x(e.raceInfo.bonus,i=>(t(),o(g,{key:i.id},[c(u).books.includes(i.livro)?(t(),w(P,{key:0,bonus:i},null,8,["bonus"])):p("",!0)],64))),128))])):p("",!0)]))}});const Oe=A(He,[["__scopeId","data-v-801467fe"]]),N=e=>(U("data-v-6fd4b59a"),e=e(),J(),e),Ue=N(()=>a("p",{class:"text-line"},"Escolha uma ra\xE7a para seu personagem. Ela definir\xE1 sua apar\xEAncia geral e seus talentos naturais.",-1)),Je=N(()=>a("p",{class:"text-line small"},[m("Se ficar em d\xFAvida, apenas clique em "),a("span",{class:"bold"},"continuar"),m(".")],-1)),Ke=N(()=>a("p",{class:"text-line small"},"A Ringo escolher\xE1 uma ra\xE7a aleat\xF3ria para voc\xEA.",-1)),Qe={class:"races-area"},We=["value"],Xe={class:"button-area"},Ye=S({__name:"Races",async setup(e){let n,u;const{character:s}=G(),{races:$}=ce(),R=([n,u]=ee(()=>re()),n=await n,u(),n),f=F([]);s.books.forEach(d=>{const r=$.get(d);if(r)for(const[_,I]of r.entries())f.push([_,I,d])});const E=F(new Map);f.length>0&&(Promise.all(s.books.map(async d=>{try{const r=await fetch(`/ringo/api/races/book${d.toString(10)}.json`);if(r.status===404)return;const _=await r.json();Array.isArray(_)&&_.forEach(I=>E.set(I.codigo,I))}catch(r){r instanceof Error&&console.error(r)}})),f.sort((d,r)=>d[1].localeCompare(r[1],"pt-br")));function L(){const d=Math.floor(Math.random()*f.length);s.race.id=f[d][0],s.race.book=f[d][2]}function M(){s.race.id===null&&L(),q.push({name:"create-char-step-3"})}return te(()=>{const d=r=>s.race.id===r[0]?(s.race.book=r[2],!0):!1;f.some(d)||(s.race.id=null,s.race.book=null)}),(d,r)=>(t(),o("section",null,[Ue,Je,Ke,a("div",Qe,[se(a("select",{"onUpdate:modelValue":r[0]||(r[0]=_=>c(s).race.id=_)},[(t(!0),o(g,null,x(f,_=>(t(),o("option",{key:_[0],value:_[0]},l(_[1]),9,We))),128))],512),[[ne,c(s).race.id,void 0,{number:!0}]])]),a("div",Xe,[C(j,{text:"Continuar",disabled:f.length<1,onClick:D(M,["prevent"])},null,8,["disabled","onClick"]),C(j,{text:"Escolha pra mim",disabled:f.length<1,onClick:D(L,["prevent"])},null,8,["disabled","onClick"]),C(j,{text:"Voltar",onClick:r[1]||(r[1]=D(_=>c(q).push({name:"create-char-step-1"}),["prevent"]))})]),C(O,{name:"fade",mode:"out-in"},{default:H(()=>[typeof c(s).race.id=="number"&&E.has(c(s).race.id)?(t(),w(Oe,{key:c(s).race.id,"ability-info":c(R),"race-info":E.get(c(s).race.id)},null,8,["ability-info","race-info"])):p("",!0)]),_:1})]))}});const ot=A(Ye,[["__scopeId","data-v-6fd4b59a"]]);export{ot as default};
