import{d as M,o as r,c,b as l,t as g,_ as F,u as N,h as E,C as B,D as j,G as L,m as R,H as q,F as h,q as S,e as p,w as x,a as f,j as b,T as I,p as z,g as G,x as A,r as H,I as K,B as y,f as P}from"./index.91ca4d6e.js";import{R as D}from"./error.596be0a1.js";import{d as U}from"./game.c452a8a4.js";import{B as C}from"./Button.ec3a8ee0.js";const J={class:"class-bonuses"},O=M({__name:"ClassBonuses",props:{classInfo:null},setup(u){return(o,k)=>(r(),c("section",J,[l("span",null,g(u.classInfo.nome),1)]))}});const Q=F(O,[["__scopeId","data-v-59050751"]]),m=u=>(z("data-v-d2b2b615"),u=u(),G(),u),W=m(()=>l("p",{class:"text-line"},"Classes descrevem a voca\xE7\xE3o de um personagem e suas aptid\xF5es especiais. Hora de escolher a sua.",-1)),X=m(()=>l("p",{class:"text-line small"},[A("Se ficar em d\xFAvida, apenas clique em "),l("span",{class:"bold"},"continuar"),A(".")],-1)),Y=m(()=>l("p",{class:"text-line small"},"A Ringo escolher\xE1 uma classe aleat\xF3ria para voc\xEA.",-1)),Z={class:"class-select-area"},ee=["disabled","value"],se={class:"button-area"},ae={key:0,class:"class-info-area"},te=m(()=>l("h2",null,"Detalhes",-1)),oe={class:"class-name-wrapper"},ne=["onClick"],le=M({__name:"Classes",setup(u){const{character:o}=N(),{classes:k}=U(),n=E([]);o.books.forEach(a=>{const s=k.get(a);if(s)for(const[e,t]of s.entries())n.push([e,t,a])});const i=B(null),d=B(null),_=E(new Map),T=j(()=>n.length<1||typeof i.value!="number");n.length>0&&(Promise.all(o.books.map(async a=>{try{const s=await fetch(`/ringo/api/classes/book${a.toString(10)}.json`);if(s.status===404)return;const e=await s.json();if(Array.isArray(e))e.forEach(t=>_.set(t.codigo,t));else throw new D("N\xE3o foi poss\xEDvel obter informa\xE7\xF5es sobre as classes.")}catch(s){s instanceof Error&&console.error(s)}})),n.sort((a,s)=>a[1].localeCompare(s[1],"pt-br")));function w(a,s,e,t=1){if(typeof a!="number"||typeof s!="string"||typeof e!="number"){if(i.value===null)return;a=i.value;const v=n.find($=>$[0]===a);if(!v)throw new D("N\xE3o foi poss\xEDvel encontrar a classe na lista.");s=v[1],e=v[2]}o.class.set(a,{book:e,level:t,name:s}),d.value=a}function V(){if(o.class.size===0){const a=Math.floor(Math.random()*n.length),s=typeof i.value=="number"?i.value:a;w(...n[s])}}return L(()=>{const a=(e,t)=>t===e[0],s=new Set;for(const e of o.class.keys())n.some(t=>a(t,e))||s.add(e);s.forEach(e=>o.class.delete(e))}),(a,s)=>(r(),c("section",null,[W,X,Y,l("div",Z,[R(l("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e)},[(r(!0),c(h,null,S(n,e=>(r(),c("option",{key:e[0],disabled:f(o).class.has(e[0]),value:e[0]},g(e[1]),9,ee))),128))],512),[[q,i.value,void 0,{number:!0}]])]),l("div",se,[p(C,{disabled:n.length<1,text:"Continuar",onClick:x(V,["prevent"])},null,8,["disabled","onClick"]),p(C,{disabled:f(T),text:"Adicionar classe",onClick:s[1]||(s[1]=x(e=>w(),["prevent"]))},null,8,["disabled"]),p(C,{text:"Voltar",onClick:s[2]||(s[2]=x(e=>f(H).push({name:"create-char-step-2"}),["prevent"]))})]),p(I,{name:"fade",mode:"out-in"},{default:b(()=>[f(o).class.size>0?(r(),c("div",ae,[te,l("div",oe,[p(K,null,{default:b(()=>[(r(!0),c(h,null,S(f(o).class,e=>(r(),c(h,{key:e[0]},[_.has(e[0])?(r(),c("span",{key:0,class:"bold green span-wrapper",onClick:t=>d.value=e[0]},g(e[1].name),9,ne)):y("",!0)],64))),128))]),_:1})]),p(I,{name:"fade",mode:"out-in"},{default:b(()=>[typeof d.value=="number"&&_.has(d.value)?(r(),P(Q,{key:d.value,classInfo:_.get(d.value)},null,8,["classInfo"])):y("",!0)]),_:1})])):y("",!0)]),_:1})]))}});const de=F(le,[["__scopeId","data-v-d2b2b615"]]);export{de as default};
