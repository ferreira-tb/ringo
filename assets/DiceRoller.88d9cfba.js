import{d as T,s as F,o as r,c as f,b as s,i as b,F as S,j as z,u as o,a as e,t as g,T as G,p as L,h as O,_ as B,w as Q,k as N,l as H,m as W,q as E,v as D,x as J,y as P,g as C,z as w,r as Y,A as V,B as M,C as I,D as A,n as U,e as Z}from"./index.0d7c7352.js";import{u as K,D as ee,a as te}from"./objects.09bdb5cc.js";import{R as X,g as le}from"./helpers.42634f98.js";import{B as _}from"./Button.35e9fce7.js";const oe=u=>(L("data-v-de20755e"),u=u(),O(),u),se={class:"history-area"},ne=oe(()=>e("h2",null,"Hist\xF3rico",-1)),ae=["onClick"],ue={class:"small"},ie=T({__name:"DiceHistory",setup(u){const y=K(),{diceHistory:i}=y,{chosenDice:h,diceAmount:n,modifier:a,rollType:m}=F(y);function c(v){h.value=v.dice,n.value=v.amount,a.value=v.modToSum,m.value=v.type}function $(v){return`${new Date(v).toLocaleTimeString("pt-br")}`}return(v,x)=>(r(),f("section",se,[ne,s(G,{name:"list"},{default:b(()=>[(r(!0),f(S,null,z(o(i),t=>(r(),f("div",{key:t.date,onClick:R=>c(t)},[e("span",null,g(`${t.text} = ${t.finalResult}`),1),e("span",ue,g($(t.date)),1)],8,ae))),128))]),_:1})]))}});const de=B(ie,[["__scopeId","data-v-de20755e"]]),re=T({__name:"BlurBackground",emits:["closeModal"],setup(u){return(y,i)=>(r(),f("div",{class:"blur-bg",onClick:i[0]||(i[0]=Q(h=>y.$emit("closeModal"),["self"]))}))}});const ce=B(re,[["__scopeId","data-v-c40a8daa"]]),ve={class:"result-modal"},_e={class:"rolls"},me={key:0,class:"other-roll"},pe={key:0,class:"save-area"},fe=["onKeyup"],xe={class:"button-area"},ye=T({__name:"ResultModal",props:{rollResult:null},emits:["hideResult","rollAgain"],setup(u,{emit:y}){const i=u,{diceCollection:h}=K(),n=N(!1),a=N(null),m=H(()=>({bold:!0,"green-text":i.rollResult.finalResult===i.rollResult.maxValue,"red-text":i.rollResult.finalResult===i.rollResult.minValue}));function c(x){return{"green-text":x.value===i.rollResult.dice,"red-text":x.value===1}}function $(){n.value=!1,a.value=null,y("rollAgain")}function v(){if(typeof a.value!="string")throw new X("O nome escolhido para a rolagem \xE9 inv\xE1lido.");if(a.value.length===0)return;const{dice:x,amount:t,modToSum:R,type:p}=i.rollResult,k=new ee(x,t,R,p);h.set(a.value,k),n.value=!1,a.value=null}return(x,t)=>{const R=W("focus");return r(),f("div",null,[s(ce,{onCloseModal:t[0]||(t[0]=p=>x.$emit("hideResult"))}),e("div",ve,[e("div",null,[e("div",null,g(u.rollResult.text),1),e("div",{class:E(["final-result",o(m)])},g(u.rollResult.finalResult),3),e("div",_e,[(r(!0),f(S,null,z(u.rollResult.rolls,p=>(r(),f(S,null,[e("span",{class:E(["each-roll",c(p)])},g(p.value),3),u.rollResult.type!=="normal"?(r(),f("span",me,g(`(${p.other})`),1)):C("",!0)],64))),256))])]),s(w,{name:"fade",mode:"out-in"},{default:b(()=>[n.value?(r(),f("div",pe,[D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>a.value=p),type:"text",maxlength:"30",placeholder:"Digite um nome",ref:"textInput",onKeyup:P(v,["enter"])},null,40,fe),[[R],[J,a.value,void 0,{trim:!0}]]),s(_,{text:"OK",onClick:v})])):C("",!0)]),_:1}),e("div",xe,[s(_,{text:"Repetir",onClick:$}),s(_,{text:"Salvar",onClick:t[2]||(t[2]=p=>n.value=!0),disabled:n.value},null,8,["disabled"]),s(_,{text:"Voltar",onClick:t[3]||(t[3]=p=>x.$emit("hideResult"))})])])])}}});const ge=B(ye,[["__scopeId","data-v-998341ab"]]),j=u=>(L("data-v-ba7e9f17"),u=u(),O(),u),Re={class:"dice-roller"},he={class:"result-area"},$e={class:"result-text"},ke={class:"mod-area"},be={class:"mod-row"},Ce=j(()=>e("span",{class:"bold"},"Quantidade",-1)),De={class:"bold green-text"},we={class:"mod-row"},Se=j(()=>e("span",{class:"bold"},"Modificador",-1)),Te={class:"radio-area"},Be=["disabled"],Ve=["disabled"],Me=["disabled"],Ie={class:"dice-area"},Ae=T({__name:"DiceRoller",setup(u){const y=K(),{diceHistory:i,diceTypes:h}=y,{chosenDice:n,diceAmount:a,modifier:m,rollType:c}=F(y),$=Y({width:"80%",height:"3em",fontSize:"1em",fontWeight:550}),v=H(()=>n.value===null?null:le(n.value,a.value,m.value)),x=H(()=>({bold:!0,"green-text":m.value>=0,"red-text":m.value<0})),t=N(null);function R(){if(n.value===null)throw new X("Nenhum dado foi escolhido.");const k=new te(n.value,a.value,m.value,c.value);for(t.value=k;i.length>5;)i.pop();i.unshift(k)}function p(){a.value>1&&a.value--}return(k,l)=>(r(),f("main",Re,[e("div",he,[e("div",$e,[s(w,{name:"fade",mode:"out-in"},{default:b(()=>[o(v)?(r(),f("span",{key:o(v)},g(o(v)),1)):C("",!0)]),_:1})]),s(_,{class:"roll-button",text:"Rolar",disabled:o(n)===null,onClick:R},null,8,["disabled"])]),s(w,{name:"fade",mode:"out-in"},{default:b(()=>[t.value?(r(),V(ge,{key:0,rollResult:t.value,onHideResult:l[0]||(l[0]=d=>t.value=null),onRollAgain:R},null,8,["rollResult"])):C("",!0)]),_:1}),e("div",ke,[e("div",be,[s(_,{text:"X",onClick:l[1]||(l[1]=d=>a.value=1)}),Ce,s(_,{text:"-",onClick:p}),e("span",De,g(o(a)),1),s(_,{text:"+",onClick:l[2]||(l[2]=d=>a.value++)})]),e("div",we,[s(_,{text:"X",onClick:l[3]||(l[3]=d=>m.value=0)}),Se,s(_,{text:"-",onClick:l[4]||(l[4]=d=>m.value--)}),e("span",{class:E(o(x))},g(o(m)),3),s(_,{text:"+",onClick:l[5]||(l[5]=d=>m.value++)})]),e("div",Te,[e("label",null,[D(e("input",{type:"radio",value:"normal","onUpdate:modelValue":l[6]||(l[6]=d=>I(c)?c.value=d:null),disabled:o(n)!==20},null,8,Be),[[M,o(c)]]),A(" Normal ")]),e("label",null,[D(e("input",{type:"radio",value:"vantagem","onUpdate:modelValue":l[7]||(l[7]=d=>I(c)?c.value=d:null),disabled:o(n)!==20},null,8,Ve),[[M,o(c)]]),A(" Vantagem ")]),e("label",null,[D(e("input",{type:"radio",value:"desvantagem","onUpdate:modelValue":l[8]||(l[8]=d=>I(c)?c.value=d:null),disabled:o(n)!==20},null,8,Me),[[M,o(c)]]),A(" Desvantagem ")])])]),e("div",Ie,[(r(!0),f(S,null,z(o(h),(d,q)=>(r(),V(_,{style:U($),text:`D${d}`,key:q,onClick:Ne=>n.value=d},null,8,["style","text","onClick"]))),128)),s(_,{text:"Cole\xE7\xE3o",style:U($),onClick:l[9]||(l[9]=d=>o(Z).push({name:"dice-collection"}))},null,8,["style"])]),s(w,{name:"fade",mode:"out-in"},{default:b(()=>[o(i).length>0?(r(),V(de,{key:0})):C("",!0)]),_:1})]))}});const Ue=B(Ae,[["__scopeId","data-v-ba7e9f17"]]);export{Ue as default};
