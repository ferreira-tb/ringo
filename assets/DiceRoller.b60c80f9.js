var W=Object.defineProperty;var J=(o,t,e)=>t in o?W(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var v=(o,t,e)=>(J(o,typeof t!="symbol"?t+"":t,e),e);import{d as E,s as U,o as f,c as x,b as p,i as $,F as z,j as A,u as l,a as s,t as b,T as K,p as F,h as M,_ as L,r as O,k as V,g as I,l as N,m as P,q as D,v as k,x as w,y as C,n as B,z as H,e as Y}from"./index.e2e29dde.js";import{u as X}from"./dice.7a80afb5.js";import{R as j,r as R,g as q}from"./helpers.1b27ed9b.js";import{B as h}from"./Button.fd09e1c2.js";class Z{constructor(t,e){v(this,"type");v(this,"value");v(this,"other");this.type=e,this.value=R(t),this.other=e==="normal"?null:R(t)}}class ee{constructor(t,e,_){v(this,"date",Date.now());v(this,"dice");v(this,"amount");v(this,"modToSum");v(this,"text");this.dice=t,this.amount=e,this.modToSum=_,this.text=q(t,e,_)}}class te extends ee{constructor(e,_,u,m){super(e,_,u);v(this,"finalResult");v(this,"type");v(this,"rolls",[]);this.type=e===20?m:"normal";let d=0;for(;d<_;){d++;const n=new Z(e,this.type);this.rolls.push(n)}if(this.rolls.length===0)throw new j("Nenhum dado foi rolado.");this.finalResult=this.rolls.reduce((n,i)=>n+(()=>{switch(this.type){case"normal":return i.value;case"vantagem":return i.value>=i.other?i.value:i.other;case"desvantagem":return i.value<=i.other?i.value:i.other}})(),this.modToSum)}}const se=o=>(F("data-v-7cc32e0b"),o=o(),M(),o),oe={class:"history-area"},ae=se(()=>s("h2",null,"Hist\xF3rico",-1)),le=["onClick"],ne={class:"small"},ie=E({__name:"DiceHistory",setup(o){const t=X(),{diceHistory:e}=t,{chosenDice:_,diceAmount:u,modifier:m,rollType:d}=U(t);function n(c){_.value=c.dice,u.value=c.amount,m.value=c.modToSum,d.value=c.type}function i(c){return`${new Date(c).toLocaleTimeString("pt-br")}`}return(c,g)=>(f(),x("section",oe,[ae,p(K,{name:"list"},{default:$(()=>[(f(!0),x(z,null,A(l(e),y=>(f(),x("div",{key:y.date,onClick:S=>n(y)},[s("span",null,b(`${y.text} = ${y.finalResult}`),1),s("span",ne,b(i(y.date)),1)],8,le))),128))]),_:1})]))}});const re=L(ie,[["__scopeId","data-v-7cc32e0b"]]),G=o=>(F("data-v-1fbcfada"),o=o(),M(),o),ue={class:"dice-roller"},de={class:"result-area"},ce={class:"result-text"},ve={class:"mod-area"},me={class:"mod-row"},pe=G(()=>s("span",{class:"bold"},"Quantidade",-1)),_e={class:"bold green-text"},he={class:"mod-row"},fe=G(()=>s("span",{class:"bold"},"Modificador",-1)),ye={class:"radio-area"},xe=["disabled"],be=["disabled"],ge=["disabled"],De={class:"dice-area"},ke=E({__name:"DiceRoller",setup(o){const t=X(),{diceHistory:e,diceTypes:_}=t,{chosenDice:u,diceAmount:m,modifier:d,rollType:n}=U(t),i=O({width:"80%",height:"3em",fontSize:"1em",fontWeight:550}),c=V(()=>u.value===null?null:q(u.value,m.value,d.value)),g=V(()=>({bold:!0,"green-text":d.value>=0,"red-text":d.value<0}));function y(){if(u.value===null)throw new j("Nenhum dado foi escolhido.");const T=new te(u.value,m.value,d.value,n.value);for(;e.length>5;)e.pop();e.unshift(T)}function S(){m.value>1&&m.value--}return(T,a)=>(f(),x("main",ue,[s("div",de,[s("div",ce,[p(N,{name:"fade",mode:"out-in"},{default:$(()=>[l(c)?(f(),x("span",{key:l(c)},b(l(c)),1)):I("",!0)]),_:1})]),p(h,{class:"roll-button",text:"Rolar",disabled:l(u)===null,onClick:y},null,8,["disabled"])]),s("div",ve,[s("div",me,[p(h,{text:"X",onClick:a[0]||(a[0]=r=>m.value=1)}),pe,p(h,{text:"-",onClick:S}),s("span",_e,b(l(m)),1),p(h,{text:"+",onClick:a[1]||(a[1]=r=>m.value++)})]),s("div",he,[p(h,{text:"X",onClick:a[2]||(a[2]=r=>d.value=0)}),fe,p(h,{text:"-",onClick:a[3]||(a[3]=r=>d.value--)}),s("span",{class:P(l(g))},b(l(d)),3),p(h,{text:"+",onClick:a[4]||(a[4]=r=>d.value++)})]),s("div",ye,[s("label",null,[D(s("input",{type:"radio",value:"normal","onUpdate:modelValue":a[5]||(a[5]=r=>w(n)?n.value=r:null),disabled:l(u)!==20},null,8,xe),[[k,l(n)]]),C(" Normal ")]),s("label",null,[D(s("input",{type:"radio",value:"vantagem","onUpdate:modelValue":a[6]||(a[6]=r=>w(n)?n.value=r:null),disabled:l(u)!==20},null,8,be),[[k,l(n)]]),C(" Vantagem ")]),s("label",null,[D(s("input",{type:"radio",value:"desvantagem","onUpdate:modelValue":a[7]||(a[7]=r=>w(n)?n.value=r:null),disabled:l(u)!==20},null,8,ge),[[k,l(n)]]),C(" Desvantagem ")])])]),s("div",De,[(f(!0),x(z,null,A(l(_),(r,Q)=>(f(),H(h,{style:B(i),text:`D${r}`,key:Q,onClick:we=>u.value=r},null,8,["style","text","onClick"]))),128)),p(h,{text:"Cole\xE7\xE3o",style:B(i),onClick:a[8]||(a[8]=r=>l(Y).push({name:"dice-collection"}))},null,8,["style"])]),p(N,{name:"fade",mode:"out-in"},{default:$(()=>[l(e).length>0?(f(),H(re,{key:0})):I("",!0)]),_:1})]))}});const Ie=L(ke,[["__scopeId","data-v-1fbcfada"]]);export{Ie as default};
